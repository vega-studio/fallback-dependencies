#!/usr/bin/env bun
// @bun
var nJ=Object.create;var{defineProperty:i0,getPrototypeOf:pJ,getOwnPropertyNames:fJ}=Object;var iJ=Object.prototype.hasOwnProperty;var dJ=(H,J,K)=>{K=H!=null?nJ(pJ(H)):{};const U=J||!H||!H.__esModule?i0(K,"default",{value:H,enumerable:!0}):K;for(let V of fJ(H))if(!iJ.call(U,V))i0(U,V,{get:()=>H[V],enumerable:!0});return U};var L=(H,J)=>()=>(J||H((J={exports:{}}).exports,J),J.exports);var $=((H)=>typeof require!=="undefined"?require:typeof Proxy!=="undefined"?new Proxy(H,{get:(J,K)=>(typeof require!=="undefined"?require:J)[K]}):H)(function(H){if(typeof require!=="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+H+'" is not supported')});var x=L((cJ)=>{cJ.fromCallback=function(H){return Object.defineProperty(function(...J){if(typeof J[J.length-1]==="function")H.apply(this,J);else return new Promise((K,U)=>{J.push((V,z)=>V!=null?U(V):K(z)),H.apply(this,J)})},"name",{value:H.name})};cJ.fromPromise=function(H){return Object.defineProperty(function(...J){const K=J[J.length-1];if(typeof K!=="function")return H.apply(this,J);else J.pop(),H.apply(this,J).then((U)=>K(null,U),K)},"name",{value:H.name})}});var c0=L((EU,d0)=>{var tJ=function(H){if(d.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./))J(H);if(!H.lutimes)K(H);if(H.chown=z(H.chown),H.fchown=z(H.fchown),H.lchown=z(H.lchown),H.chmod=U(H.chmod),H.fchmod=U(H.fchmod),H.lchmod=U(H.lchmod),H.chownSync=X(H.chownSync),H.fchownSync=X(H.fchownSync),H.lchownSync=X(H.lchownSync),H.chmodSync=V(H.chmodSync),H.fchmodSync=V(H.fchmodSync),H.lchmodSync=V(H.lchmodSync),H.stat=G(H.stat),H.fstat=G(H.fstat),H.lstat=G(H.lstat),H.statSync=Q(H.statSync),H.fstatSync=Q(H.fstatSync),H.lstatSync=Q(H.lstatSync),H.chmod&&!H.lchmod)H.lchmod=function(Z,B,q){if(q)process.nextTick(q)},H.lchmodSync=function(){};if(H.chown&&!H.lchown)H.lchown=function(Z,B,q,Y){if(Y)process.nextTick(Y)},H.lchownSync=function(){};if(eJ==="win32")H.rename=typeof H.rename!=="function"?H.rename:function(Z){function B(q,Y,O){var W=Date.now(),E=0;Z(q,Y,function R(l){if(l&&(l.code==="EACCES"||l.code==="EPERM"||l.code==="EBUSY")&&Date.now()-W<60000){if(setTimeout(function(){H.stat(Y,function(g,z0){if(g&&g.code==="ENOENT")Z(q,Y,R);else O(l)})},E),E<100)E+=10;return}if(O)O(l)})}if(Object.setPrototypeOf)Object.setPrototypeOf(B,Z);return B}(H.rename);H.read=typeof H.read!=="function"?H.read:function(Z){function B(q,Y,O,W,E,R){var l;if(R&&typeof R==="function"){var g=0;l=function(z0,p0,f0){if(z0&&z0.code==="EAGAIN"&&g<10)return g++,Z.call(H,q,Y,O,W,E,l);R.apply(this,arguments)}}return Z.call(H,q,Y,O,W,E,l)}if(Object.setPrototypeOf)Object.setPrototypeOf(B,Z);return B}(H.read),H.readSync=typeof H.readSync!=="function"?H.readSync:function(Z){return function(B,q,Y,O,W){var E=0;while(!0)try{return Z.call(H,B,q,Y,O,W)}catch(R){if(R.code==="EAGAIN"&&E<10){E++;continue}throw R}}}(H.readSync);function J(Z){Z.lchmod=function(B,q,Y){Z.open(B,d.O_WRONLY|d.O_SYMLINK,q,function(O,W){if(O){if(Y)Y(O);return}Z.fchmod(W,q,function(E){Z.close(W,function(R){if(Y)Y(E||R)})})})},Z.lchmodSync=function(B,q){var Y=Z.openSync(B,d.O_WRONLY|d.O_SYMLINK,q),O=!0,W;try{W=Z.fchmodSync(Y,q),O=!1}finally{if(O)try{Z.closeSync(Y)}catch(E){}else Z.closeSync(Y)}return W}}function K(Z){if(d.hasOwnProperty("O_SYMLINK")&&Z.futimes)Z.lutimes=function(B,q,Y,O){Z.open(B,d.O_SYMLINK,function(W,E){if(W){if(O)O(W);return}Z.futimes(E,q,Y,function(R){Z.close(E,function(l){if(O)O(R||l)})})})},Z.lutimesSync=function(B,q,Y){var O=Z.openSync(B,d.O_SYMLINK),W,E=!0;try{W=Z.futimesSync(O,q,Y),E=!1}finally{if(E)try{Z.closeSync(O)}catch(R){}else Z.closeSync(O)}return W};else if(Z.futimes)Z.lutimes=function(B,q,Y,O){if(O)process.nextTick(O)},Z.lutimesSync=function(){}}function U(Z){if(!Z)return Z;return function(B,q,Y){return Z.call(H,B,q,function(O){if(w(O))O=null;if(Y)Y.apply(this,arguments)})}}function V(Z){if(!Z)return Z;return function(B,q){try{return Z.call(H,B,q)}catch(Y){if(!w(Y))throw Y}}}function z(Z){if(!Z)return Z;return function(B,q,Y,O){return Z.call(H,B,q,Y,function(W){if(w(W))W=null;if(O)O.apply(this,arguments)})}}function X(Z){if(!Z)return Z;return function(B,q,Y){try{return Z.call(H,B,q,Y)}catch(O){if(!w(O))throw O}}}function G(Z){if(!Z)return Z;return function(B,q,Y){if(typeof q==="function")Y=q,q=null;function O(W,E){if(E){if(E.uid<0)E.uid+=4294967296;if(E.gid<0)E.gid+=4294967296}if(Y)Y.apply(this,arguments)}return q?Z.call(H,B,q,O):Z.call(H,B,O)}}function Q(Z){if(!Z)return Z;return function(B,q){var Y=q?Z.call(H,B,q):Z.call(H,B);if(Y){if(Y.uid<0)Y.uid+=4294967296;if(Y.gid<0)Y.gid+=4294967296}return Y}}function w(Z){if(!Z)return!0;if(Z.code==="ENOSYS")return!0;var B=!process.getuid||process.getuid()!==0;if(B){if(Z.code==="EINVAL"||Z.code==="EPERM")return!0}return!1}},d=import.meta.require("constants"),rJ=process.cwd,L0=null,eJ=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){if(!L0)L0=rJ.call(process);return L0};try{process.cwd()}catch(H){}if(typeof process.chdir==="function"){if($0=process.chdir,process.chdir=function(H){L0=null,$0.call(process,H)},Object.setPrototypeOf)Object.setPrototypeOf(process.chdir,$0)}var $0;d0.exports=tJ});var r0=L((QU,a0)=>{var sJ=function(H){return{ReadStream:J,WriteStream:K};function J(U,V){if(!(this instanceof J))return new J(U,V);o0.call(this);var z=this;this.path=U,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,V=V||{};var X=Object.keys(V);for(var G=0,Q=X.length;G<Q;G++){var w=X[G];this[w]=V[w]}if(this.encoding)this.setEncoding(this.encoding);if(this.start!==void 0){if(typeof this.start!=="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=Infinity;else if(typeof this.end!=="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){z._read()});return}H.open(this.path,this.flags,this.mode,function(Z,B){if(Z){z.emit("error",Z),z.readable=!1;return}z.fd=B,z.emit("open",B),z._read()})}function K(U,V){if(!(this instanceof K))return new K(U,V);o0.call(this),this.path=U,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,V=V||{};var z=Object.keys(V);for(var X=0,G=z.length;X<G;X++){var Q=z[X];this[Q]=V[Q]}if(this.start!==void 0){if(typeof this.start!=="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}if(this.busy=!1,this._queue=[],this.fd===null)this._open=H.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush()}},o0=import.meta.require("stream").Stream;a0.exports=sJ});var t0=L((MU,e0)=>{var J6=function(H){if(H===null||typeof H!=="object")return H;if(H instanceof Object)var J={__proto__:H6(H)};else var J=Object.create(null);return Object.getOwnPropertyNames(H).forEach(function(K){Object.defineProperty(J,K,Object.getOwnPropertyDescriptor(H,K))}),J};e0.exports=J6;var H6=Object.getPrototypeOf||function(H){return H.__proto__}});var H0=L((WU,F0)=>{var z6=function(){},JH=function(H,J){Object.defineProperty(H,y,{get:function(){return J}})},x0=function(H){K6(H),H.gracefulify=x0,H.createReadStream=p0,H.createWriteStream=f0;var J=H.readFile;H.readFile=K;function K(A,_,I){if(typeof _==="function")I=_,_=null;return F(A,_,I);function F(k,D,N,P){return J(k,D,function(M){if(M&&(M.code==="EMFILE"||M.code==="ENFILE"))s([F,[k,D,N],M,P||Date.now(),Date.now()]);else if(typeof N==="function")N.apply(this,arguments)})}}var U=H.writeFile;H.writeFile=V;function V(A,_,I,F){if(typeof I==="function")F=I,I=null;return k(A,_,I,F);function k(D,N,P,M,v){return U(D,N,P,function(C){if(C&&(C.code==="EMFILE"||C.code==="ENFILE"))s([k,[D,N,P,M],C,v||Date.now(),Date.now()]);else if(typeof M==="function")M.apply(this,arguments)})}}var z=H.appendFile;if(z)H.appendFile=X;function X(A,_,I,F){if(typeof I==="function")F=I,I=null;return k(A,_,I,F);function k(D,N,P,M,v){return z(D,N,P,function(C){if(C&&(C.code==="EMFILE"||C.code==="ENFILE"))s([k,[D,N,P,M],C,v||Date.now(),Date.now()]);else if(typeof M==="function")M.apply(this,arguments)})}}var G=H.copyFile;if(G)H.copyFile=Q;function Q(A,_,I,F){if(typeof I==="function")F=I,I=0;return k(A,_,I,F);function k(D,N,P,M,v){return G(D,N,P,function(C){if(C&&(C.code==="EMFILE"||C.code==="ENFILE"))s([k,[D,N,P,M],C,v||Date.now(),Date.now()]);else if(typeof M==="function")M.apply(this,arguments)})}}var w=H.readdir;H.readdir=B;var Z=/^v[0-5]\./;function B(A,_,I){if(typeof _==="function")I=_,_=null;var F=Z.test(process.version)?function D(N,P,M,v){return w(N,k(N,P,M,v))}:function D(N,P,M,v){return w(N,P,k(N,P,M,v))};return F(A,_,I);function k(D,N,P,M){return function(v,C){if(v&&(v.code==="EMFILE"||v.code==="ENFILE"))s([F,[D,N,P],v,M||Date.now(),Date.now()]);else{if(C&&C.sort)C.sort();if(typeof P==="function")P.call(this,v,C)}}}}if(process.version.substr(0,4)==="v0.8"){var q=U6(H);R=q.ReadStream,g=q.WriteStream}var Y=H.ReadStream;if(Y)R.prototype=Object.create(Y.prototype),R.prototype.open=l;var O=H.WriteStream;if(O)g.prototype=Object.create(O.prototype),g.prototype.open=z0;Object.defineProperty(H,"ReadStream",{get:function(){return R},set:function(A){R=A},enumerable:!0,configurable:!0}),Object.defineProperty(H,"WriteStream",{get:function(){return g},set:function(A){g=A},enumerable:!0,configurable:!0});var W=R;Object.defineProperty(H,"FileReadStream",{get:function(){return W},set:function(A){W=A},enumerable:!0,configurable:!0});var E=g;Object.defineProperty(H,"FileWriteStream",{get:function(){return E},set:function(A){E=A},enumerable:!0,configurable:!0});function R(A,_){if(this instanceof R)return Y.apply(this,arguments),this;else return R.apply(Object.create(R.prototype),arguments)}function l(){var A=this;D0(A.path,A.flags,A.mode,function(_,I){if(_){if(A.autoClose)A.destroy();A.emit("error",_)}else A.fd=I,A.emit("open",I),A.read()})}function g(A,_){if(this instanceof g)return O.apply(this,arguments),this;else return g.apply(Object.create(g.prototype),arguments)}function z0(){var A=this;D0(A.path,A.flags,A.mode,function(_,I){if(_)A.destroy(),A.emit("error",_);else A.fd=I,A.emit("open",I)})}function p0(A,_){return new H.ReadStream(A,_)}function f0(A,_){return new H.WriteStream(A,_)}var lJ=H.open;H.open=D0;function D0(A,_,I,F){if(typeof I==="function")F=I,I=null;return k(A,_,I,F);function k(D,N,P,M,v){return lJ(D,N,P,function(C,LU){if(C&&(C.code==="EMFILE"||C.code==="ENFILE"))s([k,[D,N,P,M],C,v||Date.now(),Date.now()]);else if(typeof M==="function")M.apply(this,arguments)})}}return H},s=function(H){e("ENQUEUE",H[0].name,H[1]),T[y].push(H),j0()},HH=function(){var H=Date.now();for(var J=0;J<T[y].length;++J)if(T[y][J].length>2)T[y][J][3]=H,T[y][J][4]=H;j0()},j0=function(){if(clearTimeout(_0),_0=void 0,T[y].length===0)return;var H=T[y].shift(),J=H[0],K=H[1],U=H[2],V=H[3],z=H[4];if(V===void 0)e("RETRY",J.name,K),J.apply(null,K);else if(Date.now()-V>=60000){e("TIMEOUT",J.name,K);var X=K.pop();if(typeof X==="function")X.call(null,U)}else{var G=Date.now()-z,Q=Math.max(z-V,1),w=Math.min(Q*1.2,100);if(G>=w)e("RETRY",J.name,K),J.apply(null,K.concat([V]));else T[y].push(H)}if(_0===void 0)_0=setTimeout(j0,0)},T=import.meta.require("fs"),K6=c0(),U6=r0(),V6=t0(),I0=import.meta.require("util"),y,E0;if(typeof Symbol==="function"&&typeof Symbol.for==="function")y=Symbol.for("graceful-fs.queue"),E0=Symbol.for("graceful-fs.previous");else y="___graceful-fs.queue",E0="___graceful-fs.previous";var e=z6;if(I0.debuglog)e=I0.debuglog("gfs4");else if(/\bgfs4\b/i.test(process.env.NODE_DEBUG||""))e=function(){var H=I0.format.apply(I0,arguments);H="GFS4: "+H.split(/\n/).join("\nGFS4: "),console.error(H)};if(!T[y]){if(s0=global[y]||[],JH(T,s0),T.close=function(H){function J(K,U){return H.call(T,K,function(V){if(!V)HH();if(typeof U==="function")U.apply(this,arguments)})}return Object.defineProperty(J,E0,{value:H}),J}(T.close),T.closeSync=function(H){function J(K){H.apply(T,arguments),HH()}return Object.defineProperty(J,E0,{value:H}),J}(T.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||""))process.on("exit",function(){e(T[y]),import.meta.require("assert").equal(T[y].length,0)})}var s0;if(!global[y])JH(global,T[y]);F0.exports=x0(V6(T));if(process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!T.__patched)F0.exports=x0(T),T.__patched=!0;var _0});var S=L((k0)=>{var KH=x().fromCallback,u=H0(),X6=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter((H)=>{return typeof u[H]==="function"});Object.assign(k0,u);X6.forEach((H)=>{k0[H]=KH(u[H])});k0.exists=function(H,J){if(typeof J==="function")return u.exists(H,J);return new Promise((K)=>{return u.exists(H,K)})};k0.read=function(H,J,K,U,V,z){if(typeof z==="function")return u.read(H,J,K,U,V,z);return new Promise((X,G)=>{u.read(H,J,K,U,V,(Q,w,Z)=>{if(Q)return G(Q);X({bytesRead:w,buffer:Z})})})};k0.write=function(H,J,...K){if(typeof K[K.length-1]==="function")return u.write(H,J,...K);return new Promise((U,V)=>{u.write(H,J,...K,(z,X,G)=>{if(z)return V(z);U({bytesWritten:X,buffer:G})})})};k0.readv=function(H,J,...K){if(typeof K[K.length-1]==="function")return u.readv(H,J,...K);return new Promise((U,V)=>{u.readv(H,J,...K,(z,X,G)=>{if(z)return V(z);U({bytesRead:X,buffers:G})})})};k0.writev=function(H,J,...K){if(typeof K[K.length-1]==="function")return u.writev(H,J,...K);return new Promise((U,V)=>{u.writev(H,J,...K,(z,X,G)=>{if(z)return V(z);U({bytesWritten:X,buffers:G})})})};if(typeof u.realpath.native==="function")k0.realpath.native=KH(u.realpath.native);else process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var VH=L((B6,UH)=>{var O6=import.meta.require("path");B6.checkPath=function H(J){if(process.platform==="win32"){if(/[<>:"|?*]/.test(J.replace(O6.parse(J).root,""))){const U=new Error(`Path contains invalid characters: ${J}`);throw U.code="EINVAL",U}}}});var GH=L((I6,v0)=>{var zH=S(),{checkPath:XH}=VH(),ZH=(H)=>{const J={mode:511};if(typeof H==="number")return H;return{...J,...H}.mode};I6.makeDir=async(H,J)=>{return XH(H),zH.mkdir(H,{mode:ZH(J),recursive:!0})};I6.makeDirSync=(H,J)=>{return XH(H),zH.mkdirSync(H,{mode:ZH(J),recursive:!0})}});var n=L((NU,YH)=>{var Q6=x().fromPromise,{makeDir:M6,makeDirSync:y0}=GH(),b0=Q6(M6);YH.exports={mkdirs:b0,mkdirsSync:y0,mkdirp:b0,mkdirpSync:y0,ensureDir:b0,ensureDirSync:y0}});var c=L((TU,qH)=>{var C6=function(H){return AH.access(H).then(()=>!0).catch(()=>!1)},W6=x().fromPromise,AH=S();qH.exports={pathExists:W6(C6),pathExistsSync:AH.existsSync}});var g0=L((PU,OH)=>{async function N6(H,J,K){const U=await J0.open(H,"r+");let V=null;try{await J0.futimes(U,J,K)}finally{try{await J0.close(U)}catch(z){V=z}}if(V)throw V}var T6=function(H,J,K){const U=J0.openSync(H,"r+");return J0.futimesSync(U,J,K),J0.closeSync(U)},J0=S(),R6=x().fromPromise;OH.exports={utimesMillis:R6(N6),utimesMillisSync:T6}});var t=L((wU,_H)=>{var P6=function(H,J,K){const U=K.dereference?(V)=>K0.stat(V,{bigint:!0}):(V)=>K0.lstat(V,{bigint:!0});return Promise.all([U(H),U(J).catch((V)=>{if(V.code==="ENOENT")return null;throw V})]).then(([V,z])=>({srcStat:V,destStat:z}))},w6=function(H,J,K){let U;const V=K.dereference?(X)=>K0.statSync(X,{bigint:!0}):(X)=>K0.lstatSync(X,{bigint:!0}),z=V(H);try{U=V(J)}catch(X){if(X.code==="ENOENT")return{srcStat:z,destStat:null};throw X}return{srcStat:z,destStat:U}};async function D6(H,J,K,U){const{srcStat:V,destStat:z}=await P6(H,J,U);if(z){if(X0(V,z)){const X=j.basename(H),G=j.basename(J);if(K==="move"&&X!==G&&X.toLowerCase()===G.toLowerCase())return{srcStat:V,destStat:z,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(V.isDirectory()&&!z.isDirectory())throw new Error(`Cannot overwrite non-directory '${J}' with directory '${H}'.`);if(!V.isDirectory()&&z.isDirectory())throw new Error(`Cannot overwrite directory '${J}' with non-directory '${H}'.`)}if(V.isDirectory()&&u0(H,J))throw new Error(Q0(H,J,K));return{srcStat:V,destStat:z}}var $6=function(H,J,K,U){const{srcStat:V,destStat:z}=w6(H,J,U);if(z){if(X0(V,z)){const X=j.basename(H),G=j.basename(J);if(K==="move"&&X!==G&&X.toLowerCase()===G.toLowerCase())return{srcStat:V,destStat:z,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(V.isDirectory()&&!z.isDirectory())throw new Error(`Cannot overwrite non-directory '${J}' with directory '${H}'.`);if(!V.isDirectory()&&z.isDirectory())throw new Error(`Cannot overwrite directory '${J}' with non-directory '${H}'.`)}if(V.isDirectory()&&u0(H,J))throw new Error(Q0(H,J,K));return{srcStat:V,destStat:z}};async function LH(H,J,K,U){const V=j.resolve(j.dirname(H)),z=j.resolve(j.dirname(K));if(z===V||z===j.parse(z).root)return;let X;try{X=await K0.stat(z,{bigint:!0})}catch(G){if(G.code==="ENOENT")return;throw G}if(X0(J,X))throw new Error(Q0(H,K,U));return LH(H,J,z,U)}var IH=function(H,J,K,U){const V=j.resolve(j.dirname(H)),z=j.resolve(j.dirname(K));if(z===V||z===j.parse(z).root)return;let X;try{X=K0.statSync(z,{bigint:!0})}catch(G){if(G.code==="ENOENT")return;throw G}if(X0(J,X))throw new Error(Q0(H,K,U));return IH(H,J,z,U)},X0=function(H,J){return J.ino&&J.dev&&J.ino===H.ino&&J.dev===H.dev},u0=function(H,J){const K=j.resolve(H).split(j.sep).filter((V)=>V),U=j.resolve(J).split(j.sep).filter((V)=>V);return K.every((V,z)=>U[z]===V)},Q0=function(H,J,K){return`Cannot ${K} '${H}' to a subdirectory of itself, '${J}'.`},K0=S(),j=import.meta.require("path"),BH=x().fromPromise;_H.exports={checkPaths:BH(D6),checkPathsSync:$6,checkParentPaths:BH(LH),checkParentPathsSync:IH,isSrcSubdir:u0,areIdentical:X0}});var CH=L((DU,WH)=>{async function k6(H,J,K={}){if(typeof K==="function")K={filter:K};if(K.clobber="clobber"in K?!!K.clobber:!0,K.overwrite="overwrite"in K?!!K.overwrite:K.clobber,K.preserveTimestamps&&process.arch==="ia32")process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0001");const{srcStat:U,destStat:V}=await G0.checkPaths(H,J,"copy",K);if(await G0.checkParentPaths(H,U,J,"copy"),!await QH(H,J,K))return;const X=Z0.dirname(J);if(!await j6(X))await x6(X);await MH(V,H,J,K)}async function QH(H,J,K){if(!K.filter)return!0;return K.filter(H,J)}async function MH(H,J,K,U){const z=await(U.dereference?b.stat:b.lstat)(J);if(z.isDirectory())return g6(z,H,J,K,U);if(z.isFile()||z.isCharacterDevice()||z.isBlockDevice())return v6(z,H,J,K,U);if(z.isSymbolicLink())return u6(H,J,K,U);if(z.isSocket())throw new Error(`Cannot copy a socket file: ${J}`);if(z.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${J}`);throw new Error(`Unknown file: ${J}`)}async function v6(H,J,K,U,V){if(!J)return EH(H,K,U,V);if(V.overwrite)return await b.unlink(U),EH(H,K,U,V);if(V.errorOnExist)throw new Error(`'${U}' already exists`)}async function EH(H,J,K,U){if(await b.copyFile(J,K),U.preserveTimestamps){if(y6(H.mode))await b6(K,H.mode);const V=await b.stat(J);await F6(K,V.atime,V.mtime)}return b.chmod(K,H.mode)}var y6=function(H){return(H&128)===0},b6=function(H,J){return b.chmod(H,J|128)};async function g6(H,J,K,U,V){if(!J)await b.mkdir(U);const z=await b.readdir(K);if(await Promise.all(z.map(async(X)=>{const G=Z0.join(K,X),Q=Z0.join(U,X);if(!await QH(G,Q,V))return;const{destStat:Z}=await G0.checkPaths(G,Q,"copy",V);return MH(Z,G,Q,V)})),!J)await b.chmod(U,H.mode)}async function u6(H,J,K,U){let V=await b.readlink(J);if(U.dereference)V=Z0.resolve(process.cwd(),V);if(!H)return b.symlink(V,K);let z=null;try{z=await b.readlink(K)}catch(X){if(X.code==="EINVAL"||X.code==="UNKNOWN")return b.symlink(V,K);throw X}if(U.dereference)z=Z0.resolve(process.cwd(),z);if(G0.isSrcSubdir(V,z))throw new Error(`Cannot copy '${V}' to a subdirectory of itself, '${z}'.`);if(G0.isSrcSubdir(z,V))throw new Error(`Cannot overwrite '${z}' with '${V}'.`);return await b.unlink(K),b.symlink(V,K)}var b=S(),Z0=import.meta.require("path"),{mkdirs:x6}=n(),{pathExists:j6}=c(),{utimesMillis:F6}=g0(),G0=t();WH.exports=k6});var wH=L(($U,PH)=>{var m6=function(H,J,K){if(typeof K==="function")K={filter:K};if(K=K||{},K.clobber="clobber"in K?!!K.clobber:!0,K.overwrite="overwrite"in K?!!K.overwrite:K.clobber,K.preserveTimestamps&&process.arch==="ia32")process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0002");const{srcStat:U,destStat:V}=A0.checkPathsSync(H,J,"copy",K);if(A0.checkParentPathsSync(H,U,J,"copy"),K.filter&&!K.filter(H,J))return;const z=Y0.dirname(J);if(!h.existsSync(z))S6(z);return RH(V,H,J,K)},RH=function(H,J,K,U){const z=(U.dereference?h.statSync:h.lstatSync)(J);if(z.isDirectory())return c6(z,H,J,K,U);else if(z.isFile()||z.isCharacterDevice()||z.isBlockDevice())return l6(z,H,J,K,U);else if(z.isSymbolicLink())return r6(H,J,K,U);else if(z.isSocket())throw new Error(`Cannot copy a socket file: ${J}`);else if(z.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${J}`);throw new Error(`Unknown file: ${J}`)},l6=function(H,J,K,U,V){if(!J)return NH(H,K,U,V);return n6(H,K,U,V)},n6=function(H,J,K,U){if(U.overwrite)return h.unlinkSync(K),NH(H,J,K,U);else if(U.errorOnExist)throw new Error(`'${K}' already exists`)},NH=function(H,J,K,U){if(h.copyFileSync(J,K),U.preserveTimestamps)p6(H.mode,J,K);return S0(K,H.mode)},p6=function(H,J,K){if(f6(H))i6(K,H);return d6(J,K)},f6=function(H){return(H&128)===0},i6=function(H,J){return S0(H,J|128)},S0=function(H,J){return h.chmodSync(H,J)},d6=function(H,J){const K=h.statSync(H);return h6(J,K.atime,K.mtime)},c6=function(H,J,K,U,V){if(!J)return o6(H.mode,K,U,V);return TH(K,U,V)},o6=function(H,J,K,U){return h.mkdirSync(K),TH(J,K,U),S0(K,H)},TH=function(H,J,K){h.readdirSync(H).forEach((U)=>a6(U,H,J,K))},a6=function(H,J,K,U){const V=Y0.join(J,H),z=Y0.join(K,H);if(U.filter&&!U.filter(V,z))return;const{destStat:X}=A0.checkPathsSync(V,z,"copy",U);return RH(X,V,z,U)},r6=function(H,J,K,U){let V=h.readlinkSync(J);if(U.dereference)V=Y0.resolve(process.cwd(),V);if(!H)return h.symlinkSync(V,K);else{let z;try{z=h.readlinkSync(K)}catch(X){if(X.code==="EINVAL"||X.code==="UNKNOWN")return h.symlinkSync(V,K);throw X}if(U.dereference)z=Y0.resolve(process.cwd(),z);if(A0.isSrcSubdir(V,z))throw new Error(`Cannot copy '${V}' to a subdirectory of itself, '${z}'.`);if(A0.isSrcSubdir(z,V))throw new Error(`Cannot overwrite '${z}' with '${V}'.`);return e6(V,K)}},e6=function(H,J){return h.unlinkSync(J),h.symlinkSync(H,J)},h=H0(),Y0=import.meta.require("path"),S6=n().mkdirsSync,h6=g0().utimesMillisSync,A0=t();PH.exports=m6});var M0=L((xU,DH)=>{var t6=x().fromPromise;DH.exports={copy:t6(CH()),copySync:wH()}});var q0=L((jU,xH)=>{var HK=function(H,J){$H.rm(H,{recursive:!0,force:!0},J)},JK=function(H){$H.rmSync(H,{recursive:!0,force:!0})},$H=H0(),s6=x().fromCallback;xH.exports={remove:s6(HK),removeSync:JK}});var uH=L((FU,gH)=>{var FH=function(H){let J;try{J=kH.readdirSync(H)}catch{return yH.mkdirsSync(H)}J.forEach((K)=>{K=vH.join(H,K),bH.removeSync(K)})},KK=x().fromPromise,kH=S(),vH=import.meta.require("path"),yH=n(),bH=q0(),jH=KK(async function H(J){let K;try{K=await kH.readdir(J)}catch{return yH.mkdirs(J)}return Promise.all(K.map((U)=>bH.remove(vH.join(J,U))))});gH.exports={emptyDirSync:FH,emptydirSync:FH,emptyDir:jH,emptydir:jH}});var lH=L((kU,mH)=>{async function VK(H){let J;try{J=await i.stat(H)}catch{}if(J&&J.isFile())return;const K=SH.dirname(H);let U=null;try{U=await i.stat(K)}catch(V){if(V.code==="ENOENT"){await hH.mkdirs(K),await i.writeFile(H,"");return}else throw V}if(U.isDirectory())await i.writeFile(H,"");else await i.readdir(K)}var zK=function(H){let J;try{J=i.statSync(H)}catch{}if(J&&J.isFile())return;const K=SH.dirname(H);try{if(!i.statSync(K).isDirectory())i.readdirSync(K)}catch(U){if(U&&U.code==="ENOENT")hH.mkdirsSync(K);else throw U}i.writeFileSync(H,"")},UK=x().fromPromise,SH=import.meta.require("path"),i=S(),hH=n();mH.exports={createFile:UK(VK),createFileSync:zK}});var dH=L((vU,iH)=>{async function GK(H,J){let K;try{K=await o.lstat(J)}catch{}let U;try{U=await o.lstat(H)}catch(X){throw X.message=X.message.replace("lstat","ensureLink"),X}if(K&&fH(U,K))return;const V=nH.dirname(J);if(!await ZK(V))await pH.mkdirs(V);await o.link(H,J)}var YK=function(H,J){let K;try{K=o.lstatSync(J)}catch{}try{const z=o.lstatSync(H);if(K&&fH(z,K))return}catch(z){throw z.message=z.message.replace("lstat","ensureLink"),z}const U=nH.dirname(J);if(o.existsSync(U))return o.linkSync(H,J);return pH.mkdirsSync(U),o.linkSync(H,J)},XK=x().fromPromise,nH=import.meta.require("path"),o=S(),pH=n(),{pathExists:ZK}=c(),{areIdentical:fH}=t();iH.exports={createLink:XK(GK),createLinkSync:YK}});var oH=L((yU,cH)=>{async function OK(H,J){if(a.isAbsolute(H)){try{await O0.lstat(H)}catch(z){throw z.message=z.message.replace("lstat","ensureSymlink"),z}return{toCwd:H,toDst:H}}const K=a.dirname(J),U=a.join(K,H);if(await AK(U))return{toCwd:U,toDst:H};try{await O0.lstat(H)}catch(z){throw z.message=z.message.replace("lstat","ensureSymlink"),z}return{toCwd:H,toDst:a.relative(K,H)}}var BK=function(H,J){if(a.isAbsolute(H)){if(!O0.existsSync(H))throw new Error("absolute srcpath does not exist");return{toCwd:H,toDst:H}}const K=a.dirname(J),U=a.join(K,H);if(O0.existsSync(U))return{toCwd:U,toDst:H};if(!O0.existsSync(H))throw new Error("relative srcpath does not exist");return{toCwd:H,toDst:a.relative(K,H)}},a=import.meta.require("path"),O0=S(),{pathExists:AK}=c(),qK=x().fromPromise;cH.exports={symlinkPaths:qK(OK),symlinkPathsSync:BK}});var eH=L((bU,rH)=>{async function IK(H,J){if(J)return J;let K;try{K=await aH.lstat(H)}catch{return"file"}return K&&K.isDirectory()?"dir":"file"}var _K=function(H,J){if(J)return J;let K;try{K=aH.lstatSync(H)}catch{return"file"}return K&&K.isDirectory()?"dir":"file"},aH=S(),LK=x().fromPromise;rH.exports={symlinkType:LK(IK),symlinkTypeSync:_K}});var JJ=L((gU,HJ)=>{async function PK(H,J,K){let U;try{U=await f.lstat(J)}catch{}if(U&&U.isSymbolicLink()){const[G,Q]=await Promise.all([f.stat(H),f.stat(J)]);if(sH(G,Q))return}const V=await WK(H,J);H=V.toDst;const z=await RK(V.toCwd,K),X=tH.dirname(J);if(!await TK(X))await QK(X);return f.symlink(H,J,z)}var wK=function(H,J,K){let U;try{U=f.lstatSync(J)}catch{}if(U&&U.isSymbolicLink()){const G=f.statSync(H),Q=f.statSync(J);if(sH(G,Q))return}const V=CK(H,J);H=V.toDst,K=NK(V.toCwd,K);const z=tH.dirname(J);if(f.existsSync(z))return f.symlinkSync(H,J,K);return MK(z),f.symlinkSync(H,J,K)},EK=x().fromPromise,tH=import.meta.require("path"),f=S(),{mkdirs:QK,mkdirsSync:MK}=n(),{symlinkPaths:WK,symlinkPathsSync:CK}=oH(),{symlinkType:RK,symlinkTypeSync:NK}=eH(),{pathExists:TK}=c(),{areIdentical:sH}=t();HJ.exports={createSymlink:EK(PK),createSymlinkSync:wK}});var YJ=L((uU,GJ)=>{var{createFile:KJ,createFileSync:UJ}=lH(),{createLink:VJ,createLinkSync:zJ}=dH(),{createSymlink:XJ,createSymlinkSync:ZJ}=JJ();GJ.exports={createFile:KJ,createFileSync:UJ,ensureFile:KJ,ensureFileSync:UJ,createLink:VJ,createLinkSync:zJ,ensureLink:VJ,ensureLinkSync:zJ,createSymlink:XJ,createSymlinkSync:ZJ,ensureSymlink:XJ,ensureSymlinkSync:ZJ}});var W0=L((SU,AJ)=>{var DK=function(H,{EOL:J="\n",finalEOL:K=!0,replacer:U=null,spaces:V}={}){const z=K?J:"";return JSON.stringify(H,U,V).replace(/\n/g,J)+z},$K=function(H){if(Buffer.isBuffer(H))H=H.toString("utf8");return H.replace(/^\uFEFF/,"")};AJ.exports={stringify:DK,stripBom:$K}});var LJ=L((hU,BJ)=>{async function xK(H,J={}){if(typeof J==="string")J={encoding:J};const K=J.fs||U0,U="throws"in J?J.throws:!0;let V=await C0.fromCallback(K.readFile)(H,J);V=OJ(V);let z;try{z=JSON.parse(V,J?J.reviver:null)}catch(X){if(U)throw X.message=`${H}: ${X.message}`,X;else return null}return z}var FK=function(H,J={}){if(typeof J==="string")J={encoding:J};const K=J.fs||U0,U="throws"in J?J.throws:!0;try{let V=K.readFileSync(H,J);return V=OJ(V),JSON.parse(V,J.reviver)}catch(V){if(U)throw V.message=`${H}: ${V.message}`,V;else return null}};async function kK(H,J,K={}){const U=K.fs||U0,V=qJ(J,K);await C0.fromCallback(U.writeFile)(H,V,K)}var yK=function(H,J,K={}){const U=K.fs||U0,V=qJ(J,K);return U.writeFileSync(H,V,K)},U0;try{U0=H0()}catch(H){U0=import.meta.require("fs")}var C0=x(),{stringify:qJ,stripBom:OJ}=W0(),jK=C0.fromPromise(xK),vK=C0.fromPromise(kK),bK={readFile:jK,readFileSync:FK,writeFile:vK,writeFileSync:yK};BJ.exports=bK});var _J=L((mU,IJ)=>{var R0=LJ();IJ.exports={readJson:R0.readFile,readJsonSync:R0.readFileSync,writeJson:R0.writeFile,writeJsonSync:R0.writeFileSync}});var N0=L((lU,MJ)=>{async function SK(H,J,K="utf-8"){const U=EJ.dirname(H);if(!await uK(U))await QJ.mkdirs(U);return h0.writeFile(H,J,K)}var hK=function(H,...J){const K=EJ.dirname(H);if(!h0.existsSync(K))QJ.mkdirsSync(K);h0.writeFileSync(H,...J)},gK=x().fromPromise,h0=S(),EJ=import.meta.require("path"),QJ=n(),uK=c().pathExists;MJ.exports={outputFile:gK(SK),outputFileSync:hK}});var CJ=L((nU,WJ)=>{async function nK(H,J,K={}){const U=mK(J,K);await lK(H,U,K)}var{stringify:mK}=W0(),{outputFile:lK}=N0();WJ.exports=nK});var NJ=L((pU,RJ)=>{var iK=function(H,J,K){const U=pK(J,K);fK(H,U,K)},{stringify:pK}=W0(),{outputFileSync:fK}=N0();RJ.exports=iK});var PJ=L((fU,TJ)=>{var dK=x().fromPromise,m=_J();m.outputJson=dK(CJ());m.outputJsonSync=NJ();m.outputJSON=m.outputJson;m.outputJSONSync=m.outputJsonSync;m.writeJSON=m.writeJson;m.writeJSONSync=m.writeJsonSync;m.readJSON=m.readJson;m.readJSONSync=m.readJsonSync;TJ.exports=m});var jJ=L((iU,xJ)=>{async function eK(H,J,K={}){const U=K.overwrite||K.clobber||!1,{srcStat:V,isChangingCase:z=!1}=await DJ.checkPaths(H,J,"move",K);await DJ.checkParentPaths(H,V,J,"move");const X=wJ.dirname(J);if(wJ.parse(X).root!==X)await aK(X);return tK(H,J,U,z)}async function tK(H,J,K,U){if(!U){if(K)await $J(J);else if(await rK(J))throw new Error("dest already exists.")}try{await cK.rename(H,J)}catch(V){if(V.code!=="EXDEV")throw V;await sK(H,J,K)}}async function sK(H,J,K){return await oK(H,J,{overwrite:K,errorOnExist:!0,preserveTimestamps:!0}),$J(H)}var cK=S(),wJ=import.meta.require("path"),{copy:oK}=M0(),{remove:$J}=q0(),{mkdirp:aK}=n(),{pathExists:rK}=c(),DJ=t();xJ.exports=eK});var bJ=L((dU,yJ)=>{var KU=function(H,J,K){K=K||{};const U=K.overwrite||K.clobber||!1,{srcStat:V,isChangingCase:z=!1}=FJ.checkPathsSync(H,J,"move",K);if(FJ.checkParentPathsSync(H,V,J,"move"),!UU(J))JU(l0.dirname(J));return VU(H,J,U,z)},UU=function(H){const J=l0.dirname(H);return l0.parse(J).root===J},VU=function(H,J,K,U){if(U)return m0(H,J,K);if(K)return vJ(J),m0(H,J,K);if(kJ.existsSync(J))throw new Error("dest already exists.");return m0(H,J,K)},m0=function(H,J,K){try{kJ.renameSync(H,J)}catch(U){if(U.code!=="EXDEV")throw U;return zU(H,J,K)}},zU=function(H,J,K){return HU(H,J,{overwrite:K,errorOnExist:!0,preserveTimestamps:!0}),vJ(H)},kJ=H0(),l0=import.meta.require("path"),HU=M0().copySync,vJ=q0().removeSync,JU=n().mkdirpSync,FJ=t();yJ.exports=KU});var uJ=L((cU,gJ)=>{var XU=x().fromPromise;gJ.exports={move:XU(jJ()),moveSync:bJ()}});var hJ=L((oU,SJ)=>{SJ.exports={...S(),...M0(),...uH(),...YJ(),...PJ(),...n(),...uJ(),...N0(),...c(),...q0()}});var B0=dJ(hJ(),1);import V0 from"path";var ZU=function(H){return H&&typeof H.status==="number"};function GU(H){return H!==void 0&&H!==null}async function T0(H,J=[]){try{const K=Bun.spawnSync([H,...J.filter(GU)],{stdio:["inherit","ignore","inherit"],env:process.env});if(K.exitCode!==0){if(!T0.silent)console.error(`Error: ${H} ${J.join(" ")} failed with code: ${K.exitCode}`),console.error(new Error().stack);return!1}}catch(K){if(!T0.silent){if(ZU(K))console.error(`Error: ${H} ${J.join(" ")} failed with code: ${K.status}`);else if(K instanceof Error)console.error(K.message);console.error(new Error().stack)}return!1}return!0}T0.silent=!0;var r=T0;import{URL as qU} from"url";var YU=function(H){return H&&typeof H.status==="number"};function AU(H){return H!==void 0&&H!==null}async function P0(H,J=[]){try{P0.lastError="";const K=Bun.spawnSync([H,...J.filter(AU)],{stdio:["inherit","pipe","pipe"],env:process.env});if(K.exitCode!==0)return console.error(`Error: ${H} ${J.join(" ")} failed with code: ${K.exitCode}`),console.error(new Error().stack),null;return(K.stdout||"").toString()}catch(K){if(YU(K))console.error(`Error: ${H} ${J.join(" ")} failed with code: ${K.status}`);else if(K instanceof Error)P0.lastError=K.message,console.error(K.message);return console.error(new Error().stack),null}}P0.lastError="";var w0=P0;var mJ=function(H){return H?.charAt},p=function(...H){B0.default.appendFileSync(OU,`\n${H.join(" ")}`,{encoding:"utf-8"}),console.warn(...H)};async function BU(){const J=B0.default.readJsonSync(V0.resolve("package.json")).fallbackDependencies,K=await r("bun",["-v"]),U=!K?await r("yarn",["-v"]):!1,V=!K&&!U?await r("npm",["-v"]):!1;if(!K&&!V&&!U){p("No appropriate package manager detected for executing fallbackDependencies. Please ensure yarn, bun, or npm is available.");return}if(!B0.default.existsSync(V0.resolve("bunfig.toml")))B0.default.copySync(V0.join(n0,"bunfig.toml"),V0.resolve("bunfig.toml"));const z=async(X)=>{if(mJ(X))X=[X];if(K){const G=Boolean(await w0("bun",["add","--no-save","--ignore-scripts",...X]));if(w0.lastError.includes("no commit matching")&&w0.lastError.includes("but repository exists"))return await r("bun",["pm","cache","rm"]),await r("bun",["add","--no-save","--ignore-scripts",...X]);return G}else if(U)return await r("yarn",["add","--no-save","--ignore-scripts",...X]);else if(V)return await r("npm",["install","--no-save","--ignore-scripts",...X])};p("POST INSTALL: fallback-dependencies"),p("Fallbacks:"),p(JSON.stringify(J,null,2));for(let[X,G]of Object.entries(J)){if(p("Installing dependencies with fallbacks for:",X),!Array.isArray(G)){p("Invalid fallbacks for:",X,"Expected an array but got:",JSON.stringify(G));continue}let Q=!1;for(let w of G){if(!mJ(w)){p("Invalid repo for:",X,"Expected a string but got:",w);continue}if(await z(w)){p("Installed:",w),Q=!0;break}else p("Installation failed for:",w),p("Attempting fallback...")}if(!Q)p("No fallback dependency worked for:",X)}}var n0=new qU(".",import.meta.url).pathname,OU=V0.resolve(n0,"post-install.log"),JV=V0.resolve(n0,".cache.json");BU();
