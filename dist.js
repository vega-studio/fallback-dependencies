#!/usr/bin/env bun
// @bun
var h6=Object.create;var{defineProperty:p0,getPrototypeOf:m6,getOwnPropertyNames:l6}=Object;var n6=Object.prototype.hasOwnProperty;var p6=(J,K,U)=>{U=J!=null?h6(m6(J)):{};const V=K||!J||!J.__esModule?p0(U,"default",{value:J,enumerable:!0}):U;for(let z of l6(J))if(!n6.call(V,z))p0(V,z,{get:()=>J[z],enumerable:!0});return V};var L=(J,K)=>()=>(K||J((K={exports:{}}).exports,K),K.exports);var $=L((f6)=>{f6.fromCallback=function(J){return Object.defineProperty(function(...K){if(typeof K[K.length-1]==="function")J.apply(this,K);else return new Promise((U,V)=>{K.push((z,H)=>z!=null?V(z):U(H)),J.apply(this,K)})},"name",{value:J.name})};f6.fromPromise=function(J){return Object.defineProperty(function(...K){const U=K[K.length-1];if(typeof U!=="function")return J.apply(this,K);else K.pop(),J.apply(this,K).then((V)=>U(null,V),U)},"name",{value:J.name})}});var i0=L((BV,f0)=>{var a6=function(J){if(f.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./))K(J);if(!J.lutimes)U(J);if(J.chown=H(J.chown),J.fchown=H(J.fchown),J.lchown=H(J.lchown),J.chmod=V(J.chmod),J.fchmod=V(J.fchmod),J.lchmod=V(J.lchmod),J.chownSync=X(J.chownSync),J.fchownSync=X(J.fchownSync),J.lchownSync=X(J.lchownSync),J.chmodSync=z(J.chmodSync),J.fchmodSync=z(J.fchmodSync),J.lchmodSync=z(J.lchmodSync),J.stat=Y(J.stat),J.fstat=Y(J.fstat),J.lstat=Y(J.lstat),J.statSync=_(J.statSync),J.fstatSync=_(J.fstatSync),J.lstatSync=_(J.lstatSync),J.chmod&&!J.lchmod)J.lchmod=function(Z,q,O){if(O)process.nextTick(O)},J.lchmodSync=function(){};if(J.chown&&!J.lchown)J.lchown=function(Z,q,O,G){if(G)process.nextTick(G)},J.lchownSync=function(){};if(o6==="win32")J.rename=typeof J.rename!=="function"?J.rename:function(Z){function q(O,G,B){var W=Date.now(),I=0;Z(O,G,function N(m){if(m&&(m.code==="EACCES"||m.code==="EPERM"||m.code==="EBUSY")&&Date.now()-W<60000){if(setTimeout(function(){J.stat(G,function(b,z0){if(b&&b.code==="ENOENT")Z(O,G,N);else B(m)})},I),I<100)I+=10;return}if(B)B(m)})}if(Object.setPrototypeOf)Object.setPrototypeOf(q,Z);return q}(J.rename);J.read=typeof J.read!=="function"?J.read:function(Z){function q(O,G,B,W,I,N){var m;if(N&&typeof N==="function"){var b=0;m=function(z0,l0,n0){if(z0&&z0.code==="EAGAIN"&&b<10)return b++,Z.call(J,O,G,B,W,I,m);N.apply(this,arguments)}}return Z.call(J,O,G,B,W,I,m)}if(Object.setPrototypeOf)Object.setPrototypeOf(q,Z);return q}(J.read),J.readSync=typeof J.readSync!=="function"?J.readSync:function(Z){return function(q,O,G,B,W){var I=0;while(!0)try{return Z.call(J,q,O,G,B,W)}catch(N){if(N.code==="EAGAIN"&&I<10){I++;continue}throw N}}}(J.readSync);function K(Z){Z.lchmod=function(q,O,G){Z.open(q,f.O_WRONLY|f.O_SYMLINK,O,function(B,W){if(B){if(G)G(B);return}Z.fchmod(W,O,function(I){Z.close(W,function(N){if(G)G(I||N)})})})},Z.lchmodSync=function(q,O){var G=Z.openSync(q,f.O_WRONLY|f.O_SYMLINK,O),B=!0,W;try{W=Z.fchmodSync(G,O),B=!1}finally{if(B)try{Z.closeSync(G)}catch(I){}else Z.closeSync(G)}return W}}function U(Z){if(f.hasOwnProperty("O_SYMLINK")&&Z.futimes)Z.lutimes=function(q,O,G,B){Z.open(q,f.O_SYMLINK,function(W,I){if(W){if(B)B(W);return}Z.futimes(I,O,G,function(N){Z.close(I,function(m){if(B)B(N||m)})})})},Z.lutimesSync=function(q,O,G){var B=Z.openSync(q,f.O_SYMLINK),W,I=!0;try{W=Z.futimesSync(B,O,G),I=!1}finally{if(I)try{Z.closeSync(B)}catch(N){}else Z.closeSync(B)}return W};else if(Z.futimes)Z.lutimes=function(q,O,G,B){if(B)process.nextTick(B)},Z.lutimesSync=function(){}}function V(Z){if(!Z)return Z;return function(q,O,G){return Z.call(J,q,O,function(B){if(w(B))B=null;if(G)G.apply(this,arguments)})}}function z(Z){if(!Z)return Z;return function(q,O){try{return Z.call(J,q,O)}catch(G){if(!w(G))throw G}}}function H(Z){if(!Z)return Z;return function(q,O,G,B){return Z.call(J,q,O,G,function(W){if(w(W))W=null;if(B)B.apply(this,arguments)})}}function X(Z){if(!Z)return Z;return function(q,O,G){try{return Z.call(J,q,O,G)}catch(B){if(!w(B))throw B}}}function Y(Z){if(!Z)return Z;return function(q,O,G){if(typeof O==="function")G=O,O=null;function B(W,I){if(I){if(I.uid<0)I.uid+=4294967296;if(I.gid<0)I.gid+=4294967296}if(G)G.apply(this,arguments)}return O?Z.call(J,q,O,B):Z.call(J,q,B)}}function _(Z){if(!Z)return Z;return function(q,O){var G=O?Z.call(J,q,O):Z.call(J,q);if(G){if(G.uid<0)G.uid+=4294967296;if(G.gid<0)G.gid+=4294967296}return G}}function w(Z){if(!Z)return!0;if(Z.code==="ENOSYS")return!0;var q=!process.getuid||process.getuid()!==0;if(q){if(Z.code==="EINVAL"||Z.code==="EPERM")return!0}return!1}},f=import.meta.require("constants"),c6=process.cwd,B0=null,o6=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){if(!B0)B0=c6.call(process);return B0};try{process.cwd()}catch(J){}if(typeof process.chdir==="function"){if(P0=process.chdir,process.chdir=function(J){B0=null,P0.call(process,J)},Object.setPrototypeOf)Object.setPrototypeOf(process.chdir,P0)}var P0;f0.exports=a6});var o0=L((_V,c0)=>{var r6=function(J){return{ReadStream:K,WriteStream:U};function K(V,z){if(!(this instanceof K))return new K(V,z);d0.call(this);var H=this;this.path=V,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,z=z||{};var X=Object.keys(z);for(var Y=0,_=X.length;Y<_;Y++){var w=X[Y];this[w]=z[w]}if(this.encoding)this.setEncoding(this.encoding);if(this.start!==void 0){if(typeof this.start!=="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=Infinity;else if(typeof this.end!=="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){H._read()});return}J.open(this.path,this.flags,this.mode,function(Z,q){if(Z){H.emit("error",Z),H.readable=!1;return}H.fd=q,H.emit("open",q),H._read()})}function U(V,z){if(!(this instanceof U))return new U(V,z);d0.call(this),this.path=V,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,z=z||{};var H=Object.keys(z);for(var X=0,Y=H.length;X<Y;X++){var _=H[X];this[_]=z[_]}if(this.start!==void 0){if(typeof this.start!=="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}if(this.busy=!1,this._queue=[],this.fd===null)this._open=J.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush()}},d0=import.meta.require("stream").Stream;c0.exports=r6});var r0=L((LV,a0)=>{var t6=function(J){if(J===null||typeof J!=="object")return J;if(J instanceof Object)var K={__proto__:e6(J)};else var K=Object.create(null);return Object.getOwnPropertyNames(J).forEach(function(U){Object.defineProperty(K,U,Object.getOwnPropertyDescriptor(J,U))}),K};a0.exports=t6;var e6=Object.getPrototypeOf||function(J){return J.__proto__}});var s=L((QV,$0)=>{var UK=function(){},s0=function(J,K){Object.defineProperty(J,v,{get:function(){return K}})},w0=function(J){s6(J),J.gracefulify=w0,J.createReadStream=l0,J.createWriteStream=n0;var K=J.readFile;J.readFile=U;function U(A,E,Q){if(typeof E==="function")Q=E,E=null;return j(A,E,Q);function j(F,D,C,P){return K(F,D,function(R){if(R&&(R.code==="EMFILE"||R.code==="ENFILE"))t([j,[F,D,C],R,P||Date.now(),Date.now()]);else if(typeof C==="function")C.apply(this,arguments)})}}var V=J.writeFile;J.writeFile=z;function z(A,E,Q,j){if(typeof Q==="function")j=Q,Q=null;return F(A,E,Q,j);function F(D,C,P,R,k){return V(D,C,P,function(M){if(M&&(M.code==="EMFILE"||M.code==="ENFILE"))t([F,[D,C,P,R],M,k||Date.now(),Date.now()]);else if(typeof R==="function")R.apply(this,arguments)})}}var H=J.appendFile;if(H)J.appendFile=X;function X(A,E,Q,j){if(typeof Q==="function")j=Q,Q=null;return F(A,E,Q,j);function F(D,C,P,R,k){return H(D,C,P,function(M){if(M&&(M.code==="EMFILE"||M.code==="ENFILE"))t([F,[D,C,P,R],M,k||Date.now(),Date.now()]);else if(typeof R==="function")R.apply(this,arguments)})}}var Y=J.copyFile;if(Y)J.copyFile=_;function _(A,E,Q,j){if(typeof Q==="function")j=Q,Q=0;return F(A,E,Q,j);function F(D,C,P,R,k){return Y(D,C,P,function(M){if(M&&(M.code==="EMFILE"||M.code==="ENFILE"))t([F,[D,C,P,R],M,k||Date.now(),Date.now()]);else if(typeof R==="function")R.apply(this,arguments)})}}var w=J.readdir;J.readdir=q;var Z=/^v[0-5]\./;function q(A,E,Q){if(typeof E==="function")Q=E,E=null;var j=Z.test(process.version)?function D(C,P,R,k){return w(C,F(C,P,R,k))}:function D(C,P,R,k){return w(C,P,F(C,P,R,k))};return j(A,E,Q);function F(D,C,P,R){return function(k,M){if(k&&(k.code==="EMFILE"||k.code==="ENFILE"))t([j,[D,C,P],k,R||Date.now(),Date.now()]);else{if(M&&M.sort)M.sort();if(typeof P==="function")P.call(this,k,M)}}}}if(process.version.substr(0,4)==="v0.8"){var O=JK(J);N=O.ReadStream,b=O.WriteStream}var G=J.ReadStream;if(G)N.prototype=Object.create(G.prototype),N.prototype.open=m;var B=J.WriteStream;if(B)b.prototype=Object.create(B.prototype),b.prototype.open=z0;Object.defineProperty(J,"ReadStream",{get:function(){return N},set:function(A){N=A},enumerable:!0,configurable:!0}),Object.defineProperty(J,"WriteStream",{get:function(){return b},set:function(A){b=A},enumerable:!0,configurable:!0});var W=N;Object.defineProperty(J,"FileReadStream",{get:function(){return W},set:function(A){W=A},enumerable:!0,configurable:!0});var I=b;Object.defineProperty(J,"FileWriteStream",{get:function(){return I},set:function(A){I=A},enumerable:!0,configurable:!0});function N(A,E){if(this instanceof N)return G.apply(this,arguments),this;else return N.apply(Object.create(N.prototype),arguments)}function m(){var A=this;T0(A.path,A.flags,A.mode,function(E,Q){if(E){if(A.autoClose)A.destroy();A.emit("error",E)}else A.fd=Q,A.emit("open",Q),A.read()})}function b(A,E){if(this instanceof b)return B.apply(this,arguments),this;else return b.apply(Object.create(b.prototype),arguments)}function z0(){var A=this;T0(A.path,A.flags,A.mode,function(E,Q){if(E)A.destroy(),A.emit("error",E);else A.fd=Q,A.emit("open",Q)})}function l0(A,E){return new J.ReadStream(A,E)}function n0(A,E){return new J.WriteStream(A,E)}var S6=J.open;J.open=T0;function T0(A,E,Q,j){if(typeof Q==="function")j=Q,Q=null;return F(A,E,Q,j);function F(D,C,P,R,k){return S6(D,C,P,function(M,qV){if(M&&(M.code==="EMFILE"||M.code==="ENFILE"))t([F,[D,C,P,R],M,k||Date.now(),Date.now()]);else if(typeof R==="function")R.apply(this,arguments)})}}return J},t=function(J){r("ENQUEUE",J[0].name,J[1]),T[v].push(J),D0()},t0=function(){var J=Date.now();for(var K=0;K<T[v].length;++K)if(T[v][K].length>2)T[v][K][3]=J,T[v][K][4]=J;D0()},D0=function(){if(clearTimeout(L0),L0=void 0,T[v].length===0)return;var J=T[v].shift(),K=J[0],U=J[1],V=J[2],z=J[3],H=J[4];if(z===void 0)r("RETRY",K.name,U),K.apply(null,U);else if(Date.now()-z>=60000){r("TIMEOUT",K.name,U);var X=U.pop();if(typeof X==="function")X.call(null,V)}else{var Y=Date.now()-H,_=Math.max(H-z,1),w=Math.min(_*1.2,100);if(Y>=w)r("RETRY",K.name,U),K.apply(null,U.concat([z]));else T[v].push(J)}if(L0===void 0)L0=setTimeout(D0,0)},T=import.meta.require("fs"),s6=i0(),JK=o0(),KK=r0(),_0=import.meta.require("util"),v,Q0;if(typeof Symbol==="function"&&typeof Symbol.for==="function")v=Symbol.for("graceful-fs.queue"),Q0=Symbol.for("graceful-fs.previous");else v="___graceful-fs.queue",Q0="___graceful-fs.previous";var r=UK;if(_0.debuglog)r=_0.debuglog("gfs4");else if(/\bgfs4\b/i.test(process.env.NODE_DEBUG||""))r=function(){var J=_0.format.apply(_0,arguments);J="GFS4: "+J.split(/\n/).join("\nGFS4: "),console.error(J)};if(!T[v]){if(e0=global[v]||[],s0(T,e0),T.close=function(J){function K(U,V){return J.call(T,U,function(z){if(!z)t0();if(typeof V==="function")V.apply(this,arguments)})}return Object.defineProperty(K,Q0,{value:J}),K}(T.close),T.closeSync=function(J){function K(U){J.apply(T,arguments),t0()}return Object.defineProperty(K,Q0,{value:J}),K}(T.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||""))process.on("exit",function(){r(T[v]),import.meta.require("assert").equal(T[v].length,0)})}var e0;if(!global[v])s0(global,T[v]);$0.exports=w0(KK(T));if(process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!T.__patched)$0.exports=w0(T),T.__patched=!0;var L0});var u=L((x0)=>{var JJ=$().fromCallback,g=s(),VK=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter((J)=>{return typeof g[J]==="function"});Object.assign(x0,g);VK.forEach((J)=>{x0[J]=JJ(g[J])});x0.exists=function(J,K){if(typeof K==="function")return g.exists(J,K);return new Promise((U)=>{return g.exists(J,U)})};x0.read=function(J,K,U,V,z,H){if(typeof H==="function")return g.read(J,K,U,V,z,H);return new Promise((X,Y)=>{g.read(J,K,U,V,z,(_,w,Z)=>{if(_)return Y(_);X({bytesRead:w,buffer:Z})})})};x0.write=function(J,K,...U){if(typeof U[U.length-1]==="function")return g.write(J,K,...U);return new Promise((V,z)=>{g.write(J,K,...U,(H,X,Y)=>{if(H)return z(H);V({bytesWritten:X,buffer:Y})})})};x0.readv=function(J,K,...U){if(typeof U[U.length-1]==="function")return g.readv(J,K,...U);return new Promise((V,z)=>{g.readv(J,K,...U,(H,X,Y)=>{if(H)return z(H);V({bytesRead:X,buffers:Y})})})};x0.writev=function(J,K,...U){if(typeof U[U.length-1]==="function")return g.writev(J,K,...U);return new Promise((V,z)=>{g.writev(J,K,...U,(H,X,Y)=>{if(H)return z(H);V({bytesWritten:X,buffers:Y})})})};if(typeof g.realpath.native==="function")x0.realpath.native=JJ(g.realpath.native);else process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var UJ=L((qK,KJ)=>{var YK=import.meta.require("path");qK.checkPath=function J(K){if(process.platform==="win32"){if(/[<>:"|?*]/.test(K.replace(YK.parse(K).root,""))){const V=new Error(`Path contains invalid characters: ${K}`);throw V.code="EINVAL",V}}}});var XJ=L((OK,j0)=>{var VJ=u(),{checkPath:zJ}=UJ(),HJ=(J)=>{const K={mode:511};if(typeof J==="number")return J;return{...K,...J}.mode};OK.makeDir=async(J,K)=>{return zJ(J),VJ.mkdir(J,{mode:HJ(K),recursive:!0})};OK.makeDirSync=(J,K)=>{return zJ(J),VJ.mkdirSync(J,{mode:HJ(K),recursive:!0})}});var l=L((RV,ZJ)=>{var LK=$().fromPromise,{makeDir:QK,makeDirSync:F0}=XJ(),k0=LK(QK);ZJ.exports={mkdirs:k0,mkdirsSync:F0,mkdirp:k0,mkdirpSync:F0,ensureDir:k0,ensureDirSync:F0}});var i=L((WV,YJ)=>{var IK=function(J){return GJ.access(J).then(()=>!0).catch(()=>!1)},EK=$().fromPromise,GJ=u();YJ.exports={pathExists:EK(IK),pathExistsSync:GJ.existsSync}});var v0=L((MV,qJ)=>{async function WK(J,K,U){const V=await J0.open(J,"r+");let z=null;try{await J0.futimes(V,K,U)}finally{try{await J0.close(V)}catch(H){z=H}}if(z)throw z}var MK=function(J,K,U){const V=J0.openSync(J,"r+");return J0.futimesSync(V,K,U),J0.closeSync(V)},J0=u(),RK=$().fromPromise;qJ.exports={utimesMillis:RK(WK),utimesMillisSync:MK}});var e=L((NV,_J)=>{var NK=function(J,K,U){const V=U.dereference?(z)=>K0.stat(z,{bigint:!0}):(z)=>K0.lstat(z,{bigint:!0});return Promise.all([V(J),V(K).catch((z)=>{if(z.code==="ENOENT")return null;throw z})]).then(([z,H])=>({srcStat:z,destStat:H}))},CK=function(J,K,U){let V;const z=U.dereference?(X)=>K0.statSync(X,{bigint:!0}):(X)=>K0.lstatSync(X,{bigint:!0}),H=z(J);try{V=z(K)}catch(X){if(X.code==="ENOENT")return{srcStat:H,destStat:null};throw X}return{srcStat:H,destStat:V}};async function TK(J,K,U,V){const{srcStat:z,destStat:H}=await NK(J,K,V);if(H){if(H0(z,H)){const X=x.basename(J),Y=x.basename(K);if(U==="move"&&X!==Y&&X.toLowerCase()===Y.toLowerCase())return{srcStat:z,destStat:H,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(z.isDirectory()&&!H.isDirectory())throw new Error(`Cannot overwrite non-directory '${K}' with directory '${J}'.`);if(!z.isDirectory()&&H.isDirectory())throw new Error(`Cannot overwrite directory '${K}' with non-directory '${J}'.`)}if(z.isDirectory()&&y0(J,K))throw new Error(E0(J,K,U));return{srcStat:z,destStat:H}}var PK=function(J,K,U,V){const{srcStat:z,destStat:H}=CK(J,K,V);if(H){if(H0(z,H)){const X=x.basename(J),Y=x.basename(K);if(U==="move"&&X!==Y&&X.toLowerCase()===Y.toLowerCase())return{srcStat:z,destStat:H,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(z.isDirectory()&&!H.isDirectory())throw new Error(`Cannot overwrite non-directory '${K}' with directory '${J}'.`);if(!z.isDirectory()&&H.isDirectory())throw new Error(`Cannot overwrite directory '${K}' with non-directory '${J}'.`)}if(z.isDirectory()&&y0(J,K))throw new Error(E0(J,K,U));return{srcStat:z,destStat:H}};async function OJ(J,K,U,V){const z=x.resolve(x.dirname(J)),H=x.resolve(x.dirname(U));if(H===z||H===x.parse(H).root)return;let X;try{X=await K0.stat(H,{bigint:!0})}catch(Y){if(Y.code==="ENOENT")return;throw Y}if(H0(K,X))throw new Error(E0(J,U,V));return OJ(J,K,H,V)}var BJ=function(J,K,U,V){const z=x.resolve(x.dirname(J)),H=x.resolve(x.dirname(U));if(H===z||H===x.parse(H).root)return;let X;try{X=K0.statSync(H,{bigint:!0})}catch(Y){if(Y.code==="ENOENT")return;throw Y}if(H0(K,X))throw new Error(E0(J,U,V));return BJ(J,K,H,V)},H0=function(J,K){return K.ino&&K.dev&&K.ino===J.ino&&K.dev===J.dev},y0=function(J,K){const U=x.resolve(J).split(x.sep).filter((z)=>z),V=x.resolve(K).split(x.sep).filter((z)=>z);return U.every((z,H)=>V[H]===z)},E0=function(J,K,U){return`Cannot ${U} '${J}' to a subdirectory of itself, '${K}'.`},K0=u(),x=import.meta.require("path"),AJ=$().fromPromise;_J.exports={checkPaths:AJ(TK),checkPathsSync:PK,checkParentPaths:AJ(OJ),checkParentPathsSync:BJ,isSrcSubdir:y0,areIdentical:H0}});var RJ=L((CV,IJ)=>{async function xK(J,K,U={}){if(typeof U==="function")U={filter:U};if(U.clobber="clobber"in U?!!U.clobber:!0,U.overwrite="overwrite"in U?!!U.overwrite:U.clobber,U.preserveTimestamps&&process.arch==="ia32")process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0001");const{srcStat:V,destStat:z}=await Z0.checkPaths(J,K,"copy",U);if(await Z0.checkParentPaths(J,V,K,"copy"),!await QJ(J,K,U))return;const X=X0.dirname(K);if(!await DK(X))await wK(X);await EJ(z,J,K,U)}async function QJ(J,K,U){if(!U.filter)return!0;return U.filter(J,K)}async function EJ(J,K,U,V){const H=await(V.dereference?y.stat:y.lstat)(K);if(H.isDirectory())return vK(H,J,K,U,V);if(H.isFile()||H.isCharacterDevice()||H.isBlockDevice())return jK(H,J,K,U,V);if(H.isSymbolicLink())return yK(J,K,U,V);if(H.isSocket())throw new Error(`Cannot copy a socket file: ${K}`);if(H.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${K}`);throw new Error(`Unknown file: ${K}`)}async function jK(J,K,U,V,z){if(!K)return LJ(J,U,V,z);if(z.overwrite)return await y.unlink(V),LJ(J,U,V,z);if(z.errorOnExist)throw new Error(`'${V}' already exists`)}async function LJ(J,K,U,V){if(await y.copyFile(K,U),V.preserveTimestamps){if(FK(J.mode))await kK(U,J.mode);const z=await y.stat(K);await $K(U,z.atime,z.mtime)}return y.chmod(U,J.mode)}var FK=function(J){return(J&128)===0},kK=function(J,K){return y.chmod(J,K|128)};async function vK(J,K,U,V,z){if(!K)await y.mkdir(V);const H=await y.readdir(U);if(await Promise.all(H.map(async(X)=>{const Y=X0.join(U,X),_=X0.join(V,X);if(!await QJ(Y,_,z))return;const{destStat:Z}=await Z0.checkPaths(Y,_,"copy",z);return EJ(Z,Y,_,z)})),!K)await y.chmod(V,J.mode)}async function yK(J,K,U,V){let z=await y.readlink(K);if(V.dereference)z=X0.resolve(process.cwd(),z);if(!J)return y.symlink(z,U);let H=null;try{H=await y.readlink(U)}catch(X){if(X.code==="EINVAL"||X.code==="UNKNOWN")return y.symlink(z,U);throw X}if(V.dereference)H=X0.resolve(process.cwd(),H);if(Z0.isSrcSubdir(z,H))throw new Error(`Cannot copy '${z}' to a subdirectory of itself, '${H}'.`);if(Z0.isSrcSubdir(H,z))throw new Error(`Cannot overwrite '${H}' with '${z}'.`);return await y.unlink(U),y.symlink(z,U)}var y=u(),X0=import.meta.require("path"),{mkdirs:wK}=l(),{pathExists:DK}=i(),{utimesMillis:$K}=v0(),Z0=e();IJ.exports=xK});var TJ=L((TV,CJ)=>{var uK=function(J,K,U){if(typeof U==="function")U={filter:U};if(U=U||{},U.clobber="clobber"in U?!!U.clobber:!0,U.overwrite="overwrite"in U?!!U.overwrite:U.clobber,U.preserveTimestamps&&process.arch==="ia32")process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0002");const{srcStat:V,destStat:z}=Y0.checkPathsSync(J,K,"copy",U);if(Y0.checkParentPathsSync(J,V,K,"copy"),U.filter&&!U.filter(J,K))return;const H=G0.dirname(K);if(!S.existsSync(H))bK(H);return WJ(z,J,K,U)},WJ=function(J,K,U,V){const H=(V.dereference?S.statSync:S.lstatSync)(K);if(H.isDirectory())return fK(H,J,K,U,V);else if(H.isFile()||H.isCharacterDevice()||H.isBlockDevice())return SK(H,J,K,U,V);else if(H.isSymbolicLink())return cK(J,K,U,V);else if(H.isSocket())throw new Error(`Cannot copy a socket file: ${K}`);else if(H.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${K}`);throw new Error(`Unknown file: ${K}`)},SK=function(J,K,U,V,z){if(!K)return MJ(J,U,V,z);return hK(J,U,V,z)},hK=function(J,K,U,V){if(V.overwrite)return S.unlinkSync(U),MJ(J,K,U,V);else if(V.errorOnExist)throw new Error(`'${U}' already exists`)},MJ=function(J,K,U,V){if(S.copyFileSync(K,U),V.preserveTimestamps)mK(J.mode,K,U);return b0(U,J.mode)},mK=function(J,K,U){if(lK(J))nK(U,J);return pK(K,U)},lK=function(J){return(J&128)===0},nK=function(J,K){return b0(J,K|128)},b0=function(J,K){return S.chmodSync(J,K)},pK=function(J,K){const U=S.statSync(J);return gK(K,U.atime,U.mtime)},fK=function(J,K,U,V,z){if(!K)return iK(J.mode,U,V,z);return NJ(U,V,z)},iK=function(J,K,U,V){return S.mkdirSync(U),NJ(K,U,V),b0(U,J)},NJ=function(J,K,U){S.readdirSync(J).forEach((V)=>dK(V,J,K,U))},dK=function(J,K,U,V){const z=G0.join(K,J),H=G0.join(U,J);if(V.filter&&!V.filter(z,H))return;const{destStat:X}=Y0.checkPathsSync(z,H,"copy",V);return WJ(X,z,H,V)},cK=function(J,K,U,V){let z=S.readlinkSync(K);if(V.dereference)z=G0.resolve(process.cwd(),z);if(!J)return S.symlinkSync(z,U);else{let H;try{H=S.readlinkSync(U)}catch(X){if(X.code==="EINVAL"||X.code==="UNKNOWN")return S.symlinkSync(z,U);throw X}if(V.dereference)H=G0.resolve(process.cwd(),H);if(Y0.isSrcSubdir(z,H))throw new Error(`Cannot copy '${z}' to a subdirectory of itself, '${H}'.`);if(Y0.isSrcSubdir(H,z))throw new Error(`Cannot overwrite '${H}' with '${z}'.`);return oK(z,U)}},oK=function(J,K){return S.unlinkSync(K),S.symlinkSync(J,K)},S=s(),G0=import.meta.require("path"),bK=l().mkdirsSync,gK=v0().utimesMillisSync,Y0=e();CJ.exports=uK});var I0=L((PV,PJ)=>{var aK=$().fromPromise;PJ.exports={copy:aK(RJ()),copySync:TJ()}});var q0=L((wV,DJ)=>{var eK=function(J,K){wJ.rm(J,{recursive:!0,force:!0},K)},tK=function(J){wJ.rmSync(J,{recursive:!0,force:!0})},wJ=s(),rK=$().fromCallback;DJ.exports={remove:rK(eK),removeSync:tK}});var bJ=L((DV,yJ)=>{var xJ=function(J){let K;try{K=jJ.readdirSync(J)}catch{return kJ.mkdirsSync(J)}K.forEach((U)=>{U=FJ.join(J,U),vJ.removeSync(U)})},sK=$().fromPromise,jJ=u(),FJ=import.meta.require("path"),kJ=l(),vJ=q0(),$J=sK(async function J(K){let U;try{U=await jJ.readdir(K)}catch{return kJ.mkdirs(K)}return Promise.all(U.map((V)=>vJ.remove(FJ.join(K,V))))});yJ.exports={emptyDirSync:xJ,emptydirSync:xJ,emptyDir:$J,emptydir:$J}});var hJ=L(($V,SJ)=>{async function KU(J){let K;try{K=await p.stat(J)}catch{}if(K&&K.isFile())return;const U=gJ.dirname(J);let V=null;try{V=await p.stat(U)}catch(z){if(z.code==="ENOENT"){await uJ.mkdirs(U),await p.writeFile(J,"");return}else throw z}if(V.isDirectory())await p.writeFile(J,"");else await p.readdir(U)}var UU=function(J){let K;try{K=p.statSync(J)}catch{}if(K&&K.isFile())return;const U=gJ.dirname(J);try{if(!p.statSync(U).isDirectory())p.readdirSync(U)}catch(V){if(V&&V.code==="ENOENT")uJ.mkdirsSync(U);else throw V}p.writeFileSync(J,"")},JU=$().fromPromise,gJ=import.meta.require("path"),p=u(),uJ=l();SJ.exports={createFile:JU(KU),createFileSync:UU}});var fJ=L((xV,pJ)=>{async function HU(J,K){let U;try{U=await d.lstat(K)}catch{}let V;try{V=await d.lstat(J)}catch(X){throw X.message=X.message.replace("lstat","ensureLink"),X}if(U&&nJ(V,U))return;const z=mJ.dirname(K);if(!await zU(z))await lJ.mkdirs(z);await d.link(J,K)}var XU=function(J,K){let U;try{U=d.lstatSync(K)}catch{}try{const H=d.lstatSync(J);if(U&&nJ(H,U))return}catch(H){throw H.message=H.message.replace("lstat","ensureLink"),H}const V=mJ.dirname(K);if(d.existsSync(V))return d.linkSync(J,K);return lJ.mkdirsSync(V),d.linkSync(J,K)},VU=$().fromPromise,mJ=import.meta.require("path"),d=u(),lJ=l(),{pathExists:zU}=i(),{areIdentical:nJ}=e();pJ.exports={createLink:VU(HU),createLinkSync:XU}});var dJ=L((jV,iJ)=>{async function YU(J,K){if(c.isAbsolute(J)){try{await A0.lstat(J)}catch(H){throw H.message=H.message.replace("lstat","ensureSymlink"),H}return{toCwd:J,toDst:J}}const U=c.dirname(K),V=c.join(U,J);if(await ZU(V))return{toCwd:V,toDst:J};try{await A0.lstat(J)}catch(H){throw H.message=H.message.replace("lstat","ensureSymlink"),H}return{toCwd:J,toDst:c.relative(U,J)}}var qU=function(J,K){if(c.isAbsolute(J)){if(!A0.existsSync(J))throw new Error("absolute srcpath does not exist");return{toCwd:J,toDst:J}}const U=c.dirname(K),V=c.join(U,J);if(A0.existsSync(V))return{toCwd:V,toDst:J};if(!A0.existsSync(J))throw new Error("relative srcpath does not exist");return{toCwd:J,toDst:c.relative(U,J)}},c=import.meta.require("path"),A0=u(),{pathExists:ZU}=i(),GU=$().fromPromise;iJ.exports={symlinkPaths:GU(YU),symlinkPathsSync:qU}});var aJ=L((FV,oJ)=>{async function OU(J,K){if(K)return K;let U;try{U=await cJ.lstat(J)}catch{return"file"}return U&&U.isDirectory()?"dir":"file"}var BU=function(J,K){if(K)return K;let U;try{U=cJ.lstatSync(J)}catch{return"file"}return U&&U.isDirectory()?"dir":"file"},cJ=u(),AU=$().fromPromise;oJ.exports={symlinkType:AU(OU),symlinkTypeSync:BU}});var sJ=L((kV,tJ)=>{async function NU(J,K,U){let V;try{V=await n.lstat(K)}catch{}if(V&&V.isSymbolicLink()){const[Y,_]=await Promise.all([n.stat(J),n.stat(K)]);if(eJ(Y,_))return}const z=await EU(J,K);J=z.toDst;const H=await RU(z.toCwd,U),X=rJ.dirname(K);if(!await MU(X))await LU(X);return n.symlink(J,K,H)}var CU=function(J,K,U){let V;try{V=n.lstatSync(K)}catch{}if(V&&V.isSymbolicLink()){const Y=n.statSync(J),_=n.statSync(K);if(eJ(Y,_))return}const z=IU(J,K);J=z.toDst,U=WU(z.toCwd,U);const H=rJ.dirname(K);if(n.existsSync(H))return n.symlinkSync(J,K,U);return QU(H),n.symlinkSync(J,K,U)},_U=$().fromPromise,rJ=import.meta.require("path"),n=u(),{mkdirs:LU,mkdirsSync:QU}=l(),{symlinkPaths:EU,symlinkPathsSync:IU}=dJ(),{symlinkType:RU,symlinkTypeSync:WU}=aJ(),{pathExists:MU}=i(),{areIdentical:eJ}=e();tJ.exports={createSymlink:_U(NU),createSymlinkSync:CU}});var Z6=L((vV,X6)=>{var{createFile:J6,createFileSync:K6}=hJ(),{createLink:U6,createLinkSync:V6}=fJ(),{createSymlink:z6,createSymlinkSync:H6}=sJ();X6.exports={createFile:J6,createFileSync:K6,ensureFile:J6,ensureFileSync:K6,createLink:U6,createLinkSync:V6,ensureLink:U6,ensureLinkSync:V6,createSymlink:z6,createSymlinkSync:H6,ensureSymlink:z6,ensureSymlinkSync:H6}});var R0=L((yV,G6)=>{var TU=function(J,{EOL:K="\n",finalEOL:U=!0,replacer:V=null,spaces:z}={}){const H=U?K:"";return JSON.stringify(J,V,z).replace(/\n/g,K)+H},PU=function(J){if(Buffer.isBuffer(J))J=J.toString("utf8");return J.replace(/^\uFEFF/,"")};G6.exports={stringify:TU,stripBom:PU}});var O6=L((bV,A6)=>{async function wU(J,K={}){if(typeof K==="string")K={encoding:K};const U=K.fs||U0,V="throws"in K?K.throws:!0;let z=await W0.fromCallback(U.readFile)(J,K);z=q6(z);let H;try{H=JSON.parse(z,K?K.reviver:null)}catch(X){if(V)throw X.message=`${J}: ${X.message}`,X;else return null}return H}var $U=function(J,K={}){if(typeof K==="string")K={encoding:K};const U=K.fs||U0,V="throws"in K?K.throws:!0;try{let z=U.readFileSync(J,K);return z=q6(z),JSON.parse(z,K.reviver)}catch(z){if(V)throw z.message=`${J}: ${z.message}`,z;else return null}};async function xU(J,K,U={}){const V=U.fs||U0,z=Y6(K,U);await W0.fromCallback(V.writeFile)(J,z,U)}var FU=function(J,K,U={}){const V=U.fs||U0,z=Y6(K,U);return V.writeFileSync(J,z,U)},U0;try{U0=s()}catch(J){U0=import.meta.require("fs")}var W0=$(),{stringify:Y6,stripBom:q6}=R0(),DU=W0.fromPromise(wU),jU=W0.fromPromise(xU),kU={readFile:DU,readFileSync:$U,writeFile:jU,writeFileSync:FU};A6.exports=kU});var _6=L((gV,B6)=>{var M0=O6();B6.exports={readJson:M0.readFile,readJsonSync:M0.readFileSync,writeJson:M0.writeFile,writeJsonSync:M0.writeFileSync}});var N0=L((uV,E6)=>{async function bU(J,K,U="utf-8"){const V=L6.dirname(J);if(!await yU(V))await Q6.mkdirs(V);return g0.writeFile(J,K,U)}var gU=function(J,...K){const U=L6.dirname(J);if(!g0.existsSync(U))Q6.mkdirsSync(U);g0.writeFileSync(J,...K)},vU=$().fromPromise,g0=u(),L6=import.meta.require("path"),Q6=l(),yU=i().pathExists;E6.exports={outputFile:vU(bU),outputFileSync:gU}});var R6=L((SV,I6)=>{async function hU(J,K,U={}){const V=uU(K,U);await SU(J,V,U)}var{stringify:uU}=R0(),{outputFile:SU}=N0();I6.exports=hU});var M6=L((hV,W6)=>{var nU=function(J,K,U){const V=mU(K,U);lU(J,V,U)},{stringify:mU}=R0(),{outputFileSync:lU}=N0();W6.exports=nU});var C6=L((mV,N6)=>{var pU=$().fromPromise,h=_6();h.outputJson=pU(R6());h.outputJsonSync=M6();h.outputJSON=h.outputJson;h.outputJSONSync=h.outputJsonSync;h.writeJSON=h.writeJson;h.writeJSONSync=h.writeJsonSync;h.readJSON=h.readJson;h.readJSONSync=h.readJsonSync;N6.exports=h});var $6=L((lV,D6)=>{async function oU(J,K,U={}){const V=U.overwrite||U.clobber||!1,{srcStat:z,isChangingCase:H=!1}=await P6.checkPaths(J,K,"move",U);await P6.checkParentPaths(J,z,K,"move");const X=T6.dirname(K);if(T6.parse(X).root!==X)await dU(X);return aU(J,K,V,H)}async function aU(J,K,U,V){if(!V){if(U)await w6(K);else if(await cU(K))throw new Error("dest already exists.")}try{await fU.rename(J,K)}catch(z){if(z.code!=="EXDEV")throw z;await rU(J,K,U)}}async function rU(J,K,U){return await iU(J,K,{overwrite:U,errorOnExist:!0,preserveTimestamps:!0}),w6(J)}var fU=u(),T6=import.meta.require("path"),{copy:iU}=I0(),{remove:w6}=q0(),{mkdirp:dU}=l(),{pathExists:cU}=i(),P6=e();D6.exports=oU});var v6=L((nV,k6)=>{var sU=function(J,K,U){U=U||{};const V=U.overwrite||U.clobber||!1,{srcStat:z,isChangingCase:H=!1}=x6.checkPathsSync(J,K,"move",U);if(x6.checkParentPathsSync(J,z,K,"move"),!JV(K))tU(S0.dirname(K));return KV(J,K,V,H)},JV=function(J){const K=S0.dirname(J);return S0.parse(K).root===K},KV=function(J,K,U,V){if(V)return u0(J,K,U);if(U)return F6(K),u0(J,K,U);if(j6.existsSync(K))throw new Error("dest already exists.");return u0(J,K,U)},u0=function(J,K,U){try{j6.renameSync(J,K)}catch(V){if(V.code!=="EXDEV")throw V;return UV(J,K,U)}},UV=function(J,K,U){return eU(J,K,{overwrite:U,errorOnExist:!0,preserveTimestamps:!0}),F6(J)},j6=s(),S0=import.meta.require("path"),eU=I0().copySync,F6=q0().removeSync,tU=l().mkdirpSync,x6=e();k6.exports=sU});var b6=L((pV,y6)=>{var VV=$().fromPromise;y6.exports={move:VV($6()),moveSync:v6()}});var u6=L((fV,g6)=>{g6.exports={...u(),...I0(),...bJ(),...Z6(),...C6(),...l(),...b6(),...N0(),...i(),...q0()}});var a=p6(u6(),1);import V0 from"path";var zV=function(J){return J&&typeof J.status==="number"};function HV(J){return J!==void 0&&J!==null}async function C0(J,K=[]){try{const U=Bun.spawnSync([J,...K.filter(HV)],{stdio:["inherit","ignore","inherit"],env:process.env});if(U.exitCode!==0){if(!C0.silent)console.error(`Error: ${J} ${K.join(" ")} failed with code: ${U.exitCode}`),console.error(new Error().stack);return!1}}catch(U){if(!C0.silent){if(zV(U))console.error(`Error: ${J} ${K.join(" ")} failed with code: ${U.status}`);else if(U instanceof Error)console.error(U.message);console.error(new Error().stack)}return!1}return!0}C0.silent=!0;var o=C0;import{URL as XV} from"url";var GV=function(J){return J?.charAt},O0=function(J){a.default.appendFileSync(ZV,`\n${J}`,{encoding:"utf-8"})};async function YV(){const K=a.default.readJsonSync(V0.resolve("package.json")).fallbackDependencies,U=await o("bun",["-v"]),V=!U?await o("yarn",["-v"]):!1,z=!U&&!V?await o("npm",["-v"]):!1;if(!U&&!z&&!V){console.warn("No appropriate package manager detected for executing fallbackDependencies. Please ensure yarn, bun, or npm is available.");return}if(!a.default.existsSync(V0.resolve("bunfig.toml")))a.default.copySync(V0.join(m0,"bunfig.toml"),V0.resolve("bunfig.toml"));const H=async(_)=>{if(GV(_))_=[_];if(U)return await o("bun",["add","--no-save","--ignore-scripts",..._]);else if(V)return await o("yarn",["add","--no-save","--ignore-scripts",..._]);else if(z)return await o("npm",["install","--no-save","--ignore-scripts",..._])};console.log("POST INSTALL: fallback-dependencies");const X=[],Y=a.default.existsSync(h0)?a.default.readJsonSync(h0):{};O0("Using cache:"),O0(JSON.stringify(Y,null,2));for(let[_,w]of Object.entries(K)){if(console.warn("Installing dependencies with fallbacks for:",_),!Array.isArray(w)){console.warn("Invalid fallbacks for:",_,"Expected an array but got:",w);continue}let Z=!1;for(let q of w){if(!q.charAt){console.warn("Invalid repo for:",_,"Expected a string but got:",q);continue}if(await H(q)){if(console.log("Installed:",q),Z=!0,Y[_]!==q)X.push([_,q]);break}}if(!Z)console.error("No fallback dependency worked for:",_)}if(X.length>0){if(O0("Cache misses detected:"),O0(JSON.stringify(X,null,2)),U){if(!await o("bun",["pm","cache","rm"])||!await H(X.map((_)=>_[1]))){O0("Failed to correct cache misses for bun");return}}X.forEach(([_,w])=>{Y[_]=w}),a.default.writeJsonSync(h0,Y,{encoding:"utf-8"})}}var m0=new XV(".",import.meta.url).pathname,ZV=V0.resolve(m0,"post-install.log"),h0=V0.resolve(m0,".cache.json");YV();
