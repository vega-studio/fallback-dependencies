#!/usr/bin/env bun
// @bun
import{createRequire as o6} from"node:module";var p6=Object.create;var{defineProperty:i0,getPrototypeOf:f6,getOwnPropertyNames:i6}=Object;var d6=Object.prototype.hasOwnProperty;var c6=(H,K,V)=>{V=H!=null?p6(f6(H)):{};const z=K||!H||!H.__esModule?i0(V,"default",{value:H,enumerable:!0}):V;for(let U of i6(H))if(!d6.call(z,U))i0(z,U,{get:()=>H[U],enumerable:!0});return z};var _=(H,K)=>()=>(K||H((K={exports:{}}).exports,K),K.exports);var $=o6(import.meta.url);var j=_((a6)=>{a6.fromCallback=function(H){return Object.defineProperty(function(...K){if(typeof K[K.length-1]==="function")H.apply(this,K);else return new Promise((V,z)=>{K.push((U,X)=>U!=null?z(U):V(X)),H.apply(this,K)})},"name",{value:H.name})};a6.fromPromise=function(H){return Object.defineProperty(function(...K){const V=K[K.length-1];if(typeof V!=="function")return H.apply(this,K);else K.pop(),H.apply(this,K).then((z)=>V(null,z),V)},"name",{value:H.name})}});var c0=_((C2,d0)=>{var HK=function(H){if(o.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./))K(H);if(!H.lutimes)V(H);if(H.chown=X(H.chown),H.fchown=X(H.fchown),H.lchown=X(H.lchown),H.chmod=z(H.chmod),H.fchmod=z(H.fchmod),H.lchmod=z(H.lchmod),H.chownSync=Z(H.chownSync),H.fchownSync=Z(H.fchownSync),H.lchownSync=Z(H.lchownSync),H.chmodSync=U(H.chmodSync),H.fchmodSync=U(H.fchmodSync),H.lchmodSync=U(H.lchmodSync),H.stat=Y(H.stat),H.fstat=Y(H.fstat),H.lstat=Y(H.lstat),H.statSync=W(H.statSync),H.fstatSync=W(H.fstatSync),H.lstatSync=W(H.lstatSync),H.chmod&&!H.lchmod)H.lchmod=function(G,O,A){if(A)process.nextTick(A)},H.lchmodSync=function(){};if(H.chown&&!H.lchown)H.lchown=function(G,O,A,J){if(J)process.nextTick(J)},H.lchownSync=function(){};if(s6==="win32")H.rename=typeof H.rename!=="function"?H.rename:function(G){function O(A,J,q){var Q=Date.now(),L=0;G(A,J,function R(n){if(n&&(n.code==="EACCES"||n.code==="EPERM"||n.code==="EBUSY")&&Date.now()-Q<60000){if(setTimeout(function(){H.stat(J,function(g,G0){if(g&&g.code==="ENOENT")G(A,J,R);else q(n)})},L),L<100)L+=10;return}if(q)q(n)})}if(Object.setPrototypeOf)Object.setPrototypeOf(O,G);return O}(H.rename);H.read=typeof H.read!=="function"?H.read:function(G){function O(A,J,q,Q,L,R){var n;if(R&&typeof R==="function"){var g=0;n=function(G0,p0,f0){if(G0&&G0.code==="EAGAIN"&&g<10)return g++,G.call(H,A,J,q,Q,L,n);R.apply(this,arguments)}}return G.call(H,A,J,q,Q,L,n)}if(Object.setPrototypeOf)Object.setPrototypeOf(O,G);return O}(H.read),H.readSync=typeof H.readSync!=="function"?H.readSync:function(G){return function(O,A,J,q,Q){var L=0;while(!0)try{return G.call(H,O,A,J,q,Q)}catch(R){if(R.code==="EAGAIN"&&L<10){L++;continue}throw R}}}(H.readSync);function K(G){G.lchmod=function(O,A,J){G.open(O,o.O_WRONLY|o.O_SYMLINK,A,function(q,Q){if(q){if(J)J(q);return}G.fchmod(Q,A,function(L){G.close(Q,function(R){if(J)J(L||R)})})})},G.lchmodSync=function(O,A){var J=G.openSync(O,o.O_WRONLY|o.O_SYMLINK,A),q=!0,Q;try{Q=G.fchmodSync(J,A),q=!1}finally{if(q)try{G.closeSync(J)}catch(L){}else G.closeSync(J)}return Q}}function V(G){if(o.hasOwnProperty("O_SYMLINK")&&G.futimes)G.lutimes=function(O,A,J,q){G.open(O,o.O_SYMLINK,function(Q,L){if(Q){if(q)q(Q);return}G.futimes(L,A,J,function(R){G.close(L,function(n){if(q)q(R||n)})})})},G.lutimesSync=function(O,A,J){var q=G.openSync(O,o.O_SYMLINK),Q,L=!0;try{Q=G.futimesSync(q,A,J),L=!1}finally{if(L)try{G.closeSync(q)}catch(R){}else G.closeSync(q)}return Q};else if(G.futimes)G.lutimes=function(O,A,J,q){if(q)process.nextTick(q)},G.lutimesSync=function(){}}function z(G){if(!G)return G;return function(O,A,J){return G.call(H,O,A,function(q){if(D(q))q=null;if(J)J.apply(this,arguments)})}}function U(G){if(!G)return G;return function(O,A){try{return G.call(H,O,A)}catch(J){if(!D(J))throw J}}}function X(G){if(!G)return G;return function(O,A,J,q){return G.call(H,O,A,J,function(Q){if(D(Q))Q=null;if(q)q.apply(this,arguments)})}}function Z(G){if(!G)return G;return function(O,A,J){try{return G.call(H,O,A,J)}catch(q){if(!D(q))throw q}}}function Y(G){if(!G)return G;return function(O,A,J){if(typeof A==="function")J=A,A=null;function q(Q,L){if(L){if(L.uid<0)L.uid+=4294967296;if(L.gid<0)L.gid+=4294967296}if(J)J.apply(this,arguments)}return A?G.call(H,O,A,q):G.call(H,O,q)}}function W(G){if(!G)return G;return function(O,A){var J=A?G.call(H,O,A):G.call(H,O);if(J){if(J.uid<0)J.uid+=4294967296;if(J.gid<0)J.gid+=4294967296}return J}}function D(G){if(!G)return!0;if(G.code==="ENOSYS")return!0;var O=!process.getuid||process.getuid()!==0;if(O){if(G.code==="EINVAL"||G.code==="EPERM")return!0}return!1}},o=import.meta.require("constants"),t6=process.cwd,E0=null,s6=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){if(!E0)E0=t6.call(process);return E0};try{process.cwd()}catch(H){}if(typeof process.chdir==="function"){if($0=process.chdir,process.chdir=function(H){E0=null,$0.call(process,H)},Object.setPrototypeOf)Object.setPrototypeOf(process.chdir,$0)}var $0;d0.exports=HK});var r0=_((M2,a0)=>{var KK=function(H){return{ReadStream:K,WriteStream:V};function K(z,U){if(!(this instanceof K))return new K(z,U);o0.call(this);var X=this;this.path=z,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,U=U||{};var Z=Object.keys(U);for(var Y=0,W=Z.length;Y<W;Y++){var D=Z[Y];this[D]=U[D]}if(this.encoding)this.setEncoding(this.encoding);if(this.start!==void 0){if(typeof this.start!=="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=Infinity;else if(typeof this.end!=="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){X._read()});return}H.open(this.path,this.flags,this.mode,function(G,O){if(G){X.emit("error",G),X.readable=!1;return}X.fd=O,X.emit("open",O),X._read()})}function V(z,U){if(!(this instanceof V))return new V(z,U);o0.call(this),this.path=z,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,U=U||{};var X=Object.keys(U);for(var Z=0,Y=X.length;Z<Y;Z++){var W=X[Z];this[W]=U[W]}if(this.start!==void 0){if(typeof this.start!=="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}if(this.busy=!1,this._queue=[],this.fd===null)this._open=H.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush()}},o0=import.meta.require("stream").Stream;a0.exports=KK});var t0=_((R2,e0)=>{var zK=function(H){if(H===null||typeof H!=="object")return H;if(H instanceof Object)var K={__proto__:VK(H)};else var K=Object.create(null);return Object.getOwnPropertyNames(H).forEach(function(V){Object.defineProperty(K,V,Object.getOwnPropertyDescriptor(H,V))}),K};e0.exports=zK;var VK=Object.getPrototypeOf||function(H){return H.__proto__}});var K0=_((N2,F0)=>{var GK=function(){},KH=function(H,K){Object.defineProperty(H,y,{get:function(){return K}})},j0=function(H){UK(H),H.gracefulify=j0,H.createReadStream=p0,H.createWriteStream=f0;var K=H.readFile;H.readFile=V;function V(B,I,E){if(typeof I==="function")E=I,I=null;return F(B,I,E);function F(k,P,N,w){return K(k,P,function(C){if(C&&(C.code==="EMFILE"||C.code==="ENFILE"))H0([F,[k,P,N],C,w||Date.now(),Date.now()]);else if(typeof N==="function")N.apply(this,arguments)})}}var z=H.writeFile;H.writeFile=U;function U(B,I,E,F){if(typeof E==="function")F=E,E=null;return k(B,I,E,F);function k(P,N,w,C,v){return z(P,N,w,function(M){if(M&&(M.code==="EMFILE"||M.code==="ENFILE"))H0([k,[P,N,w,C],M,v||Date.now(),Date.now()]);else if(typeof C==="function")C.apply(this,arguments)})}}var X=H.appendFile;if(X)H.appendFile=Z;function Z(B,I,E,F){if(typeof E==="function")F=E,E=null;return k(B,I,E,F);function k(P,N,w,C,v){return X(P,N,w,function(M){if(M&&(M.code==="EMFILE"||M.code==="ENFILE"))H0([k,[P,N,w,C],M,v||Date.now(),Date.now()]);else if(typeof C==="function")C.apply(this,arguments)})}}var Y=H.copyFile;if(Y)H.copyFile=W;function W(B,I,E,F){if(typeof E==="function")F=E,E=0;return k(B,I,E,F);function k(P,N,w,C,v){return Y(P,N,w,function(M){if(M&&(M.code==="EMFILE"||M.code==="ENFILE"))H0([k,[P,N,w,C],M,v||Date.now(),Date.now()]);else if(typeof C==="function")C.apply(this,arguments)})}}var D=H.readdir;H.readdir=O;var G=/^v[0-5]\./;function O(B,I,E){if(typeof I==="function")E=I,I=null;var F=G.test(process.version)?function P(N,w,C,v){return D(N,k(N,w,C,v))}:function P(N,w,C,v){return D(N,w,k(N,w,C,v))};return F(B,I,E);function k(P,N,w,C){return function(v,M){if(v&&(v.code==="EMFILE"||v.code==="ENFILE"))H0([F,[P,N,w],v,C||Date.now(),Date.now()]);else{if(M&&M.sort)M.sort();if(typeof w==="function")w.call(this,v,M)}}}}if(process.version.substr(0,4)==="v0.8"){var A=XK(H);R=A.ReadStream,g=A.WriteStream}var J=H.ReadStream;if(J)R.prototype=Object.create(J.prototype),R.prototype.open=n;var q=H.WriteStream;if(q)g.prototype=Object.create(q.prototype),g.prototype.open=G0;Object.defineProperty(H,"ReadStream",{get:function(){return R},set:function(B){R=B},enumerable:!0,configurable:!0}),Object.defineProperty(H,"WriteStream",{get:function(){return g},set:function(B){g=B},enumerable:!0,configurable:!0});var Q=R;Object.defineProperty(H,"FileReadStream",{get:function(){return Q},set:function(B){Q=B},enumerable:!0,configurable:!0});var L=g;Object.defineProperty(H,"FileWriteStream",{get:function(){return L},set:function(B){L=B},enumerable:!0,configurable:!0});function R(B,I){if(this instanceof R)return J.apply(this,arguments),this;else return R.apply(Object.create(R.prototype),arguments)}function n(){var B=this;P0(B.path,B.flags,B.mode,function(I,E){if(I){if(B.autoClose)B.destroy();B.emit("error",I)}else B.fd=E,B.emit("open",E),B.read()})}function g(B,I){if(this instanceof g)return q.apply(this,arguments),this;else return g.apply(Object.create(g.prototype),arguments)}function G0(){var B=this;P0(B.path,B.flags,B.mode,function(I,E){if(I)B.destroy(),B.emit("error",I);else B.fd=E,B.emit("open",E)})}function p0(B,I){return new H.ReadStream(B,I)}function f0(B,I){return new H.WriteStream(B,I)}var n6=H.open;H.open=P0;function P0(B,I,E,F){if(typeof E==="function")F=E,E=null;return k(B,I,E,F);function k(P,N,w,C,v){return n6(P,N,w,function(M,Q2){if(M&&(M.code==="EMFILE"||M.code==="ENFILE"))H0([k,[P,N,w,C],M,v||Date.now(),Date.now()]);else if(typeof C==="function")C.apply(this,arguments)})}}return H},H0=function(H){t("ENQUEUE",H[0].name,H[1]),T[y].push(H),x0()},HH=function(){var H=Date.now();for(var K=0;K<T[y].length;++K)if(T[y][K].length>2)T[y][K][3]=H,T[y][K][4]=H;x0()},x0=function(){if(clearTimeout(I0),I0=void 0,T[y].length===0)return;var H=T[y].shift(),K=H[0],V=H[1],z=H[2],U=H[3],X=H[4];if(U===void 0)t("RETRY",K.name,V),K.apply(null,V);else if(Date.now()-U>=60000){t("TIMEOUT",K.name,V);var Z=V.pop();if(typeof Z==="function")Z.call(null,z)}else{var Y=Date.now()-X,W=Math.max(X-U,1),D=Math.min(W*1.2,100);if(Y>=D)t("RETRY",K.name,V),K.apply(null,V.concat([U]));else T[y].push(H)}if(I0===void 0)I0=setTimeout(x0,0)},T=import.meta.require("fs"),UK=c0(),XK=r0(),ZK=t0(),Q0=import.meta.require("util"),y,L0;if(typeof Symbol==="function"&&typeof Symbol.for==="function")y=Symbol.for("graceful-fs.queue"),L0=Symbol.for("graceful-fs.previous");else y="___graceful-fs.queue",L0="___graceful-fs.previous";var t=GK;if(Q0.debuglog)t=Q0.debuglog("gfs4");else if(/\bgfs4\b/i.test(process.env.NODE_DEBUG||""))t=function(){var H=Q0.format.apply(Q0,arguments);H="GFS4: "+H.split(/\n/).join("\nGFS4: "),console.error(H)};if(!T[y]){if(s0=global[y]||[],KH(T,s0),T.close=function(H){function K(V,z){return H.call(T,V,function(U){if(!U)HH();if(typeof z==="function")z.apply(this,arguments)})}return Object.defineProperty(K,L0,{value:H}),K}(T.close),T.closeSync=function(H){function K(V){H.apply(T,arguments),HH()}return Object.defineProperty(K,L0,{value:H}),K}(T.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||""))process.on("exit",function(){t(T[y]),import.meta.require("assert").equal(T[y].length,0)})}var s0;if(!global[y])KH(global,T[y]);F0.exports=j0(ZK(T));if(process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!T.__patched)F0.exports=j0(T),T.__patched=!0;var I0});var S=_((k0)=>{var VH=j().fromCallback,u=K0(),JK=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter((H)=>{return typeof u[H]==="function"});Object.assign(k0,u);JK.forEach((H)=>{k0[H]=VH(u[H])});k0.exists=function(H,K){if(typeof K==="function")return u.exists(H,K);return new Promise((V)=>{return u.exists(H,V)})};k0.read=function(H,K,V,z,U,X){if(typeof X==="function")return u.read(H,K,V,z,U,X);return new Promise((Z,Y)=>{u.read(H,K,V,z,U,(W,D,G)=>{if(W)return Y(W);Z({bytesRead:D,buffer:G})})})};k0.write=function(H,K,...V){if(typeof V[V.length-1]==="function")return u.write(H,K,...V);return new Promise((z,U)=>{u.write(H,K,...V,(X,Z,Y)=>{if(X)return U(X);z({bytesWritten:Z,buffer:Y})})})};k0.readv=function(H,K,...V){if(typeof V[V.length-1]==="function")return u.readv(H,K,...V);return new Promise((z,U)=>{u.readv(H,K,...V,(X,Z,Y)=>{if(X)return U(X);z({bytesRead:Z,buffers:Y})})})};k0.writev=function(H,K,...V){if(typeof V[V.length-1]==="function")return u.writev(H,K,...V);return new Promise((z,U)=>{u.writev(H,K,...V,(X,Z,Y)=>{if(X)return U(X);z({bytesWritten:Z,buffers:Y})})})};if(typeof u.realpath.native==="function")k0.realpath.native=VH(u.realpath.native);else process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var UH=_((EK,zH)=>{var _K=import.meta.require("path");EK.checkPath=function H(K){if(process.platform==="win32"){if(/[<>:"|?*]/.test(K.replace(_K.parse(K).root,""))){const z=new Error(`Path contains invalid characters: ${K}`);throw z.code="EINVAL",z}}}});var JH=_((IK,v0)=>{var XH=S(),{checkPath:ZH}=UH(),GH=(H)=>{const K={mode:511};if(typeof H==="number")return H;return{...K,...H}.mode};IK.makeDir=async(H,K)=>{return ZH(H),XH.mkdir(H,{mode:GH(K),recursive:!0})};IK.makeDirSync=(H,K)=>{return ZH(H),XH.mkdirSync(H,{mode:GH(K),recursive:!0})}});var f=_((D2,YH)=>{var CK=j().fromPromise,{makeDir:MK,makeDirSync:y0}=JH(),b0=CK(MK);YH.exports={mkdirs:b0,mkdirsSync:y0,mkdirp:b0,mkdirpSync:y0,ensureDir:b0,ensureDirSync:y0}});var a=_((P2,qH)=>{var NK=function(H){return AH.access(H).then(()=>!0).catch(()=>!1)},RK=j().fromPromise,AH=S();qH.exports={pathExists:RK(NK),pathExistsSync:AH.existsSync}});var g0=_(($2,OH)=>{async function wK(H,K,V){const z=await V0.open(H,"r+");let U=null;try{await V0.futimes(z,K,V)}finally{try{await V0.close(z)}catch(X){U=X}}if(U)throw U}var DK=function(H,K,V){const z=V0.openSync(H,"r+");return V0.futimesSync(z,K,V),V0.closeSync(z)},V0=S(),TK=j().fromPromise;OH.exports={utimesMillis:TK(wK),utimesMillisSync:DK}});var s=_((j2,QH)=>{var PK=function(H,K,V){const z=V.dereference?(U)=>z0.stat(U,{bigint:!0}):(U)=>z0.lstat(U,{bigint:!0});return Promise.all([z(H),z(K).catch((U)=>{if(U.code==="ENOENT")return null;throw U})]).then(([U,X])=>({srcStat:U,destStat:X}))},$K=function(H,K,V){let z;const U=V.dereference?(Z)=>z0.statSync(Z,{bigint:!0}):(Z)=>z0.lstatSync(Z,{bigint:!0}),X=U(H);try{z=U(K)}catch(Z){if(Z.code==="ENOENT")return{srcStat:X,destStat:null};throw Z}return{srcStat:X,destStat:z}};async function jK(H,K,V,z){const{srcStat:U,destStat:X}=await PK(H,K,z);if(X){if(J0(U,X)){const Z=x.basename(H),Y=x.basename(K);if(V==="move"&&Z!==Y&&Z.toLowerCase()===Y.toLowerCase())return{srcStat:U,destStat:X,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(U.isDirectory()&&!X.isDirectory())throw new Error(`Cannot overwrite non-directory '${K}' with directory '${H}'.`);if(!U.isDirectory()&&X.isDirectory())throw new Error(`Cannot overwrite directory '${K}' with non-directory '${H}'.`)}if(U.isDirectory()&&u0(H,K))throw new Error(W0(H,K,V));return{srcStat:U,destStat:X}}var xK=function(H,K,V,z){const{srcStat:U,destStat:X}=$K(H,K,z);if(X){if(J0(U,X)){const Z=x.basename(H),Y=x.basename(K);if(V==="move"&&Z!==Y&&Z.toLowerCase()===Y.toLowerCase())return{srcStat:U,destStat:X,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(U.isDirectory()&&!X.isDirectory())throw new Error(`Cannot overwrite non-directory '${K}' with directory '${H}'.`);if(!U.isDirectory()&&X.isDirectory())throw new Error(`Cannot overwrite directory '${K}' with non-directory '${H}'.`)}if(U.isDirectory()&&u0(H,K))throw new Error(W0(H,K,V));return{srcStat:U,destStat:X}};async function _H(H,K,V,z){const U=x.resolve(x.dirname(H)),X=x.resolve(x.dirname(V));if(X===U||X===x.parse(X).root)return;let Z;try{Z=await z0.stat(X,{bigint:!0})}catch(Y){if(Y.code==="ENOENT")return;throw Y}if(J0(K,Z))throw new Error(W0(H,V,z));return _H(H,K,X,z)}var EH=function(H,K,V,z){const U=x.resolve(x.dirname(H)),X=x.resolve(x.dirname(V));if(X===U||X===x.parse(X).root)return;let Z;try{Z=z0.statSync(X,{bigint:!0})}catch(Y){if(Y.code==="ENOENT")return;throw Y}if(J0(K,Z))throw new Error(W0(H,V,z));return EH(H,K,X,z)},J0=function(H,K){return K.ino&&K.dev&&K.ino===H.ino&&K.dev===H.dev},u0=function(H,K){const V=x.resolve(H).split(x.sep).filter((U)=>U),z=x.resolve(K).split(x.sep).filter((U)=>U);return V.every((U,X)=>z[X]===U)},W0=function(H,K,V){return`Cannot ${V} '${H}' to a subdirectory of itself, '${K}'.`},z0=S(),x=import.meta.require("path"),BH=j().fromPromise;QH.exports={checkPaths:BH(jK),checkPathsSync:xK,checkParentPaths:BH(_H),checkParentPathsSync:EH,isSrcSubdir:u0,areIdentical:J0}});var MH=_((x2,CH)=>{async function yK(H,K,V={}){if(typeof V==="function")V={filter:V};if(V.clobber="clobber"in V?!!V.clobber:!0,V.overwrite="overwrite"in V?!!V.overwrite:V.clobber,V.preserveTimestamps&&process.arch==="ia32")process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0001");const{srcStat:z,destStat:U}=await A0.checkPaths(H,K,"copy",V);if(await A0.checkParentPaths(H,z,K,"copy"),!await LH(H,K,V))return;const Z=Y0.dirname(K);if(!await kK(Z))await FK(Z);await WH(U,H,K,V)}async function LH(H,K,V){if(!V.filter)return!0;return V.filter(H,K)}async function WH(H,K,V,z){const X=await(z.dereference?b.stat:b.lstat)(K);if(X.isDirectory())return SK(X,H,K,V,z);if(X.isFile()||X.isCharacterDevice()||X.isBlockDevice())return bK(X,H,K,V,z);if(X.isSymbolicLink())return hK(H,K,V,z);if(X.isSocket())throw new Error(`Cannot copy a socket file: ${K}`);if(X.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${K}`);throw new Error(`Unknown file: ${K}`)}async function bK(H,K,V,z,U){if(!K)return IH(H,V,z,U);if(U.overwrite)return await b.unlink(z),IH(H,V,z,U);if(U.errorOnExist)throw new Error(`'${z}' already exists`)}async function IH(H,K,V,z){if(await b.copyFile(K,V),z.preserveTimestamps){if(gK(H.mode))await uK(V,H.mode);const U=await b.stat(K);await vK(V,U.atime,U.mtime)}return b.chmod(V,H.mode)}var gK=function(H){return(H&128)===0},uK=function(H,K){return b.chmod(H,K|128)};async function SK(H,K,V,z,U){if(!K)await b.mkdir(z);const X=await b.readdir(V);if(await Promise.all(X.map(async(Z)=>{const Y=Y0.join(V,Z),W=Y0.join(z,Z);if(!await LH(Y,W,U))return;const{destStat:G}=await A0.checkPaths(Y,W,"copy",U);return WH(G,Y,W,U)})),!K)await b.chmod(z,H.mode)}async function hK(H,K,V,z){let U=await b.readlink(K);if(z.dereference)U=Y0.resolve(process.cwd(),U);if(!H)return b.symlink(U,V);let X=null;try{X=await b.readlink(V)}catch(Z){if(Z.code==="EINVAL"||Z.code==="UNKNOWN")return b.symlink(U,V);throw Z}if(z.dereference)X=Y0.resolve(process.cwd(),X);if(A0.isSrcSubdir(U,X))throw new Error(`Cannot copy '${U}' to a subdirectory of itself, '${X}'.`);if(A0.isSrcSubdir(X,U))throw new Error(`Cannot overwrite '${X}' with '${U}'.`);return await b.unlink(V),b.symlink(U,V)}var b=S(),Y0=import.meta.require("path"),{mkdirs:FK}=f(),{pathExists:kK}=a(),{utimesMillis:vK}=g0(),A0=s();CH.exports=yK});var DH=_((F2,wH)=>{var nK=function(H,K,V){if(typeof V==="function")V={filter:V};if(V=V||{},V.clobber="clobber"in V?!!V.clobber:!0,V.overwrite="overwrite"in V?!!V.overwrite:V.clobber,V.preserveTimestamps&&process.arch==="ia32")process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0002");const{srcStat:z,destStat:U}=O0.checkPathsSync(H,K,"copy",V);if(O0.checkParentPathsSync(H,z,K,"copy"),V.filter&&!V.filter(H,K))return;const X=q0.dirname(K);if(!h.existsSync(X))mK(X);return RH(U,H,K,V)},RH=function(H,K,V,z){const X=(z.dereference?h.statSync:h.lstatSync)(K);if(X.isDirectory())return aK(X,H,K,V,z);else if(X.isFile()||X.isCharacterDevice()||X.isBlockDevice())return pK(X,H,K,V,z);else if(X.isSymbolicLink())return tK(H,K,V,z);else if(X.isSocket())throw new Error(`Cannot copy a socket file: ${K}`);else if(X.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${K}`);throw new Error(`Unknown file: ${K}`)},pK=function(H,K,V,z,U){if(!K)return NH(H,V,z,U);return fK(H,V,z,U)},fK=function(H,K,V,z){if(z.overwrite)return h.unlinkSync(V),NH(H,K,V,z);else if(z.errorOnExist)throw new Error(`'${V}' already exists`)},NH=function(H,K,V,z){if(h.copyFileSync(K,V),z.preserveTimestamps)iK(H.mode,K,V);return S0(V,H.mode)},iK=function(H,K,V){if(dK(H))cK(V,H);return oK(K,V)},dK=function(H){return(H&128)===0},cK=function(H,K){return S0(H,K|128)},S0=function(H,K){return h.chmodSync(H,K)},oK=function(H,K){const V=h.statSync(H);return lK(K,V.atime,V.mtime)},aK=function(H,K,V,z,U){if(!K)return rK(H.mode,V,z,U);return TH(V,z,U)},rK=function(H,K,V,z){return h.mkdirSync(V),TH(K,V,z),S0(V,H)},TH=function(H,K,V){h.readdirSync(H).forEach((z)=>eK(z,H,K,V))},eK=function(H,K,V,z){const U=q0.join(K,H),X=q0.join(V,H);if(z.filter&&!z.filter(U,X))return;const{destStat:Z}=O0.checkPathsSync(U,X,"copy",z);return RH(Z,U,X,z)},tK=function(H,K,V,z){let U=h.readlinkSync(K);if(z.dereference)U=q0.resolve(process.cwd(),U);if(!H)return h.symlinkSync(U,V);else{let X;try{X=h.readlinkSync(V)}catch(Z){if(Z.code==="EINVAL"||Z.code==="UNKNOWN")return h.symlinkSync(U,V);throw Z}if(z.dereference)X=q0.resolve(process.cwd(),X);if(O0.isSrcSubdir(U,X))throw new Error(`Cannot copy '${U}' to a subdirectory of itself, '${X}'.`);if(O0.isSrcSubdir(X,U))throw new Error(`Cannot overwrite '${X}' with '${U}'.`);return sK(U,V)}},sK=function(H,K){return h.unlinkSync(K),h.symlinkSync(H,K)},h=K0(),q0=import.meta.require("path"),mK=f().mkdirsSync,lK=g0().utimesMillisSync,O0=s();wH.exports=nK});var C0=_((k2,PH)=>{var HV=j().fromPromise;PH.exports={copy:HV(MH()),copySync:DH()}});var B0=_((v2,jH)=>{var VV=function(H,K){$H.rm(H,{recursive:!0,force:!0},K)},zV=function(H){$H.rmSync(H,{recursive:!0,force:!0})},$H=K0(),KV=j().fromCallback;jH.exports={remove:KV(VV),removeSync:zV}});var uH=_((y2,gH)=>{var FH=function(H){let K;try{K=kH.readdirSync(H)}catch{return yH.mkdirsSync(H)}K.forEach((V)=>{V=vH.join(H,V),bH.removeSync(V)})},UV=j().fromPromise,kH=S(),vH=import.meta.require("path"),yH=f(),bH=B0(),xH=UV(async function H(K){let V;try{V=await kH.readdir(K)}catch{return yH.mkdirs(K)}return Promise.all(V.map((z)=>bH.remove(vH.join(K,z))))});gH.exports={emptyDirSync:FH,emptydirSync:FH,emptyDir:xH,emptydir:xH}});var lH=_((b2,mH)=>{async function ZV(H){let K;try{K=await c.stat(H)}catch{}if(K&&K.isFile())return;const V=SH.dirname(H);let z=null;try{z=await c.stat(V)}catch(U){if(U.code==="ENOENT"){await hH.mkdirs(V),await c.writeFile(H,"");return}else throw U}if(z.isDirectory())await c.writeFile(H,"");else await c.readdir(V)}var GV=function(H){let K;try{K=c.statSync(H)}catch{}if(K&&K.isFile())return;const V=SH.dirname(H);try{if(!c.statSync(V).isDirectory())c.readdirSync(V)}catch(z){if(z&&z.code==="ENOENT")hH.mkdirsSync(V);else throw z}c.writeFileSync(H,"")},XV=j().fromPromise,SH=import.meta.require("path"),c=S(),hH=f();mH.exports={createFile:XV(ZV),createFileSync:GV}});var dH=_((g2,iH)=>{async function AV(H,K){let V;try{V=await r.lstat(K)}catch{}let z;try{z=await r.lstat(H)}catch(Z){throw Z.message=Z.message.replace("lstat","ensureLink"),Z}if(V&&fH(z,V))return;const U=nH.dirname(K);if(!await YV(U))await pH.mkdirs(U);await r.link(H,K)}var qV=function(H,K){let V;try{V=r.lstatSync(K)}catch{}try{const X=r.lstatSync(H);if(V&&fH(X,V))return}catch(X){throw X.message=X.message.replace("lstat","ensureLink"),X}const z=nH.dirname(K);if(r.existsSync(z))return r.linkSync(H,K);return pH.mkdirsSync(z),r.linkSync(H,K)},JV=j().fromPromise,nH=import.meta.require("path"),r=S(),pH=f(),{pathExists:YV}=a(),{areIdentical:fH}=s();iH.exports={createLink:JV(AV),createLinkSync:qV}});var oH=_((u2,cH)=>{async function _V(H,K){if(e.isAbsolute(H)){try{await _0.lstat(H)}catch(X){throw X.message=X.message.replace("lstat","ensureSymlink"),X}return{toCwd:H,toDst:H}}const V=e.dirname(K),z=e.join(V,H);if(await OV(z))return{toCwd:z,toDst:H};try{await _0.lstat(H)}catch(X){throw X.message=X.message.replace("lstat","ensureSymlink"),X}return{toCwd:H,toDst:e.relative(V,H)}}var EV=function(H,K){if(e.isAbsolute(H)){if(!_0.existsSync(H))throw new Error("absolute srcpath does not exist");return{toCwd:H,toDst:H}}const V=e.dirname(K),z=e.join(V,H);if(_0.existsSync(z))return{toCwd:z,toDst:H};if(!_0.existsSync(H))throw new Error("relative srcpath does not exist");return{toCwd:H,toDst:e.relative(V,H)}},e=import.meta.require("path"),_0=S(),{pathExists:OV}=a(),BV=j().fromPromise;cH.exports={symlinkPaths:BV(_V),symlinkPathsSync:EV}});var eH=_((S2,rH)=>{async function IV(H,K){if(K)return K;let V;try{V=await aH.lstat(H)}catch{return"file"}return V&&V.isDirectory()?"dir":"file"}var LV=function(H,K){if(K)return K;let V;try{V=aH.lstatSync(H)}catch{return"file"}return V&&V.isDirectory()?"dir":"file"},aH=S(),QV=j().fromPromise;rH.exports={symlinkType:QV(IV),symlinkTypeSync:LV}});var K6=_((h2,H6)=>{async function PV(H,K,V){let z;try{z=await d.lstat(K)}catch{}if(z&&z.isSymbolicLink()){const[Y,W]=await Promise.all([d.stat(H),d.stat(K)]);if(sH(Y,W))return}const U=await RV(H,K);H=U.toDst;const X=await TV(U.toCwd,V),Z=tH.dirname(K);if(!await DV(Z))await CV(Z);return d.symlink(H,K,X)}var $V=function(H,K,V){let z;try{z=d.lstatSync(K)}catch{}if(z&&z.isSymbolicLink()){const Y=d.statSync(H),W=d.statSync(K);if(sH(Y,W))return}const U=NV(H,K);H=U.toDst,V=wV(U.toCwd,V);const X=tH.dirname(K);if(d.existsSync(X))return d.symlinkSync(H,K,V);return MV(X),d.symlinkSync(H,K,V)},WV=j().fromPromise,tH=import.meta.require("path"),d=S(),{mkdirs:CV,mkdirsSync:MV}=f(),{symlinkPaths:RV,symlinkPathsSync:NV}=oH(),{symlinkType:TV,symlinkTypeSync:wV}=eH(),{pathExists:DV}=a(),{areIdentical:sH}=s();H6.exports={createSymlink:WV(PV),createSymlinkSync:$V}});var Y6=_((m2,J6)=>{var{createFile:V6,createFileSync:z6}=lH(),{createLink:U6,createLinkSync:X6}=dH(),{createSymlink:Z6,createSymlinkSync:G6}=K6();J6.exports={createFile:V6,createFileSync:z6,ensureFile:V6,ensureFileSync:z6,createLink:U6,createLinkSync:X6,ensureLink:U6,ensureLinkSync:X6,createSymlink:Z6,createSymlinkSync:G6,ensureSymlink:Z6,ensureSymlinkSync:G6}});var M0=_((l2,A6)=>{var jV=function(H,{EOL:K="\n",finalEOL:V=!0,replacer:z=null,spaces:U}={}){const X=V?K:"";return JSON.stringify(H,z,U).replace(/\n/g,K)+X},xV=function(H){if(Buffer.isBuffer(H))H=H.toString("utf8");return H.replace(/^\uFEFF/,"")};A6.exports={stringify:jV,stripBom:xV}});var _6=_((n2,B6)=>{async function FV(H,K={}){if(typeof K==="string")K={encoding:K};const V=K.fs||U0,z="throws"in K?K.throws:!0;let U=await R0.fromCallback(V.readFile)(H,K);U=O6(U);let X;try{X=JSON.parse(U,K?K.reviver:null)}catch(Z){if(z)throw Z.message=`${H}: ${Z.message}`,Z;else return null}return X}var vV=function(H,K={}){if(typeof K==="string")K={encoding:K};const V=K.fs||U0,z="throws"in K?K.throws:!0;try{let U=V.readFileSync(H,K);return U=O6(U),JSON.parse(U,K.reviver)}catch(U){if(z)throw U.message=`${H}: ${U.message}`,U;else return null}};async function yV(H,K,V={}){const z=V.fs||U0,U=q6(K,V);await R0.fromCallback(z.writeFile)(H,U,V)}var gV=function(H,K,V={}){const z=V.fs||U0,U=q6(K,V);return z.writeFileSync(H,U,V)},U0;try{U0=K0()}catch(H){U0=import.meta.require("fs")}var R0=j(),{stringify:q6,stripBom:O6}=M0(),kV=R0.fromPromise(FV),bV=R0.fromPromise(yV),uV={readFile:kV,readFileSync:vV,writeFile:bV,writeFileSync:gV};B6.exports=uV});var Q6=_((p2,E6)=>{var N0=_6();E6.exports={readJson:N0.readFile,readJsonSync:N0.readFileSync,writeJson:N0.writeFile,writeJsonSync:N0.writeFileSync}});var T0=_((f2,W6)=>{async function mV(H,K,V="utf-8"){const z=I6.dirname(H);if(!await hV(z))await L6.mkdirs(z);return h0.writeFile(H,K,V)}var lV=function(H,...K){const V=I6.dirname(H);if(!h0.existsSync(V))L6.mkdirsSync(V);h0.writeFileSync(H,...K)},SV=j().fromPromise,h0=S(),I6=import.meta.require("path"),L6=f(),hV=a().pathExists;W6.exports={outputFile:SV(mV),outputFileSync:lV}});var M6=_((i2,C6)=>{async function fV(H,K,V={}){const z=nV(K,V);await pV(H,z,V)}var{stringify:nV}=M0(),{outputFile:pV}=T0();C6.exports=fV});var N6=_((d2,R6)=>{var cV=function(H,K,V){const z=iV(K,V);dV(H,z,V)},{stringify:iV}=M0(),{outputFileSync:dV}=T0();R6.exports=cV});var w6=_((c2,T6)=>{var oV=j().fromPromise,m=Q6();m.outputJson=oV(M6());m.outputJsonSync=N6();m.outputJSON=m.outputJson;m.outputJSONSync=m.outputJsonSync;m.writeJSON=m.writeJson;m.writeJSONSync=m.writeJsonSync;m.readJSON=m.readJson;m.readJSONSync=m.readJsonSync;T6.exports=m});var x6=_((o2,j6)=>{async function sV(H,K,V={}){const z=V.overwrite||V.clobber||!1,{srcStat:U,isChangingCase:X=!1}=await P6.checkPaths(H,K,"move",V);await P6.checkParentPaths(H,U,K,"move");const Z=D6.dirname(K);if(D6.parse(Z).root!==Z)await eV(Z);return H2(H,K,z,X)}async function H2(H,K,V,z){if(!z){if(V)await $6(K);else if(await tV(K))throw new Error("dest already exists.")}try{await aV.rename(H,K)}catch(U){if(U.code!=="EXDEV")throw U;await K2(H,K,V)}}async function K2(H,K,V){return await rV(H,K,{overwrite:V,errorOnExist:!0,preserveTimestamps:!0}),$6(H)}var aV=S(),D6=import.meta.require("path"),{copy:rV}=C0(),{remove:$6}=B0(),{mkdirp:eV}=f(),{pathExists:tV}=a(),P6=s();j6.exports=sV});var b6=_((a2,y6)=>{var U2=function(H,K,V){V=V||{};const z=V.overwrite||V.clobber||!1,{srcStat:U,isChangingCase:X=!1}=F6.checkPathsSync(H,K,"move",V);if(F6.checkParentPathsSync(H,U,K,"move"),!X2(K))z2(l0.dirname(K));return Z2(H,K,z,X)},X2=function(H){const K=l0.dirname(H);return l0.parse(K).root===K},Z2=function(H,K,V,z){if(z)return m0(H,K,V);if(V)return v6(K),m0(H,K,V);if(k6.existsSync(K))throw new Error("dest already exists.");return m0(H,K,V)},m0=function(H,K,V){try{k6.renameSync(H,K)}catch(z){if(z.code!=="EXDEV")throw z;return G2(H,K,V)}},G2=function(H,K,V){return V2(H,K,{overwrite:V,errorOnExist:!0,preserveTimestamps:!0}),v6(H)},k6=K0(),l0=import.meta.require("path"),V2=C0().copySync,v6=B0().removeSync,z2=f().mkdirpSync,F6=s();y6.exports=U2});var u6=_((r2,g6)=>{var J2=j().fromPromise;g6.exports={move:J2(x6()),moveSync:b6()}});var h6=_((e2,S6)=>{S6.exports={...S(),...C0(),...uH(),...Y6(),...w6(),...f(),...u6(),...T0(),...a(),...B0()}});var p=c6(h6(),1);import i from"path";var Y2=function(H){return H&&typeof H.status==="number"};function A2(H){return H!==void 0&&H!==null}async function w0(H,K=[]){try{const V=Bun.spawnSync([H,...K.filter(A2)],{stdio:["inherit","ignore","inherit"],env:process.env});if(V.exitCode!==0){if(!w0.silent)console.error(`Error: ${H} ${K.join(" ")} failed with code: ${V.exitCode}`),console.error(new Error().stack);return!1}}catch(V){if(!w0.silent){if(Y2(V))console.error(`Error: ${H} ${K.join(" ")} failed with code: ${V.status}`);else if(V instanceof Error)console.error(V.message);console.error(new Error().stack)}return!1}return!0}w0.silent=!0;var X0=w0;import{URL as B2,fileURLToPath as _2} from"url";var q2=function(H){return H&&typeof H.status==="number"};function O2(H){return H!==void 0&&H!==null}async function D0(H,K=[]){try{D0.lastError="";const V=Bun.spawnSync([H,...K.filter(O2)],{stdio:["inherit","pipe","pipe"],env:process.env});if(V.exitCode!==0)return console.error(`Error: ${H} ${K.join(" ")} failed with code: ${V.exitCode}`),console.error(new Error().stack),null;return(V.stdout||"").toString()}catch(V){if(q2(V))console.error(`Error: ${H} ${K.join(" ")} failed with code: ${V.status}`);else if(V instanceof Error)D0.lastError=V.message,console.error(V.message);return console.error(new Error().stack),null}}D0.lastError="";var Z0=D0;var m6=function(H){return H?.charAt},l=function(...H){p.default.appendFileSync(n0,`\n${H.join(" ")}`,{encoding:"utf-8"}),console.warn(...H)};async function E2(){if(!p.default.existsSync(n0))p.default.ensureFileSync(n0),await new Promise((Z)=>setTimeout(Z,100));const K=p.default.readJsonSync(i.resolve("package.json")).fallbackDependencies,V=await X0("bun",["-v"]),z=!V?await X0("yarn",["-v"]):!1,U=!V&&!z?await X0("npm",["-v"]):!1;if(!V&&!U&&!z){l("No appropriate package manager detected for executing fallbackDependencies. Please ensure yarn, bun, or npm is available.");return}if(!p.default.existsSync(i.resolve("bunfig.toml")))p.default.copySync(i.join(l6,"bunfig.toml"),i.resolve("bunfig.toml"));const X=async(Z)=>{if(m6(Z))Z=[Z];if(V){let Y=Boolean(await Z0("bun",["add","--no-save","--ignore-scripts",...Z]));if(Z0.lastError.includes("no commit matching")&&Z0.lastError.includes("but repository exists"))await Z0("bun",["pm","cache","rm"]),Y=Boolean(await Z0("bun",["add","--no-save","--ignore-scripts",...Z]));if(!Y)l(`Failed to install dependency with bun: ${Z}`);return Y}else if(z)return await X0("yarn",["add","--no-save","--ignore-scripts",...Z]);else if(U)return await X0("npm",["install","--no-save","--ignore-scripts",...Z])};l("POST INSTALL: fallback-dependencies"),l("Fallbacks:"),l(JSON.stringify(K,null,2));for(let[Z,Y]of Object.entries(K)){if(l("Installing dependencies with fallbacks for:",Z),!Array.isArray(Y)){l("Invalid fallbacks for:",Z,"Expected an array but got:",JSON.stringify(Y));continue}let W=!1;for(let A of Y){if(!m6(A)){l("Invalid repo for:",Z,"Expected a string but got:",A);continue}if(await X(A)){l("Installed:",A),W=!0;break}else l("Installation failed for:",A),l("Attempting fallback...")}if(!W){l("No fallback dependency worked for:",Z);continue}const D=i.resolve("node_modules");if(!p.default.existsSync(i.join(D,Z))){l(`A fallback dependency was installed, however, the key provided "${Z}" in the fallback dependency configuration does NOT match the package identifier.\nError: node_modules/${Z} was not found.`);continue}const G=i.join(D,Z,"package.json");if(!p.default.existsSync(G)){l(`A fallback dependency was installed, however, the package.json for "${Z}" was not found at: ${G}.`);continue}const O=p.default.readJsonSync(G);if(O.bin){const A=i.join(D,".bin");if(!p.default.existsSync(A))p.default.ensureDirSync(A);for(let J of Object.keys(O.bin)){const q=i.join(A,J),Q=i.join(D,Z,O.bin[J]);if(!p.default.existsSync(Q)){l(`A fallback dependency was installed, however, the bin "${J}" was not found at: ${Q}.`);continue}p.default.copySync(Q,q)}}}}var l6=_2(new B2(".",import.meta.url)),n0=i.join(l6,"post-install.log");E2();
